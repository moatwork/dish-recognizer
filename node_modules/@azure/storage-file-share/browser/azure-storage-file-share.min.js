/*!
 * Azure Storage SDK for JavaScript - File, 12.0.0-preview.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
/*!
 * Azure Storage SDK for JavaScript - File, 12.0.0-preview.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).azfile={})}(this,(function(e){"use strict";function t(e){return e.toLowerCase()}var r=function(){function e(e){if(this._headersMap={},e)for(var t in e)this.set(t,e[t])}return e.prototype.set=function(e,r){this._headersMap[t(e)]={name:e,value:r.toString()}},e.prototype.get=function(e){var r=this._headersMap[t(e)];return r?r.value:void 0},e.prototype.contains=function(e){return!!this._headersMap[t(e)]},e.prototype.remove=function(e){var r=this.contains(e);return delete this._headersMap[t(e)],r},e.prototype.rawHeaders=function(){var e={};for(var t in this._headersMap){var r=this._headersMap[t];e[r.name.toLowerCase()]=r.value}return e},e.prototype.headersArray=function(){var e=[];for(var t in this._headersMap)e.push(this._headersMap[t]);return e},e.prototype.headerNames=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].name);return e},e.prototype.headerValues=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].value);return e},e.prototype.toJson=function(){return this.rawHeaders()},e.prototype.toString=function(){return JSON.stringify(this.toJson())},e.prototype.clone=function(){return new e(this.rawHeaders())},e}();function n(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function i(e){for(var t=atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}function a(e,t){return e(t={exports:{}},t.exports),t.exports}for(var s=a((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}})),o=[],l=0;l<256;++l)o[l]=(l+256).toString(16).substr(1);var u=function(e,t){var r=t||0,n=o;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")};var p=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[n+a]=i[a];return t||u(i)},c={coreHttpVersion:"1.0.0-preview.6",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}},d=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/gi,m="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function h(e){var t={};return t.body=e.bodyAsText,t.headers=e.headers,t.status=e.status,t}function f(e){var t=e.clone();return t.headers&&t.headers.remove("authorization"),t}function y(){return p()}function g(e,t){return new Promise((function(r){return setTimeout((function(){return r(t)}),e)}))}var v=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function N(e,t,r){return e&&t?e.split(t).join(r||""):e}var S=function(){function e(e,t){void 0===e&&(e={}),this.modelMappers=e,this.isXML=t}return e.prototype.validateConstraints=function(e,t,r){var n=function(e,n){throw new Error('"'+r+'" with value "'+t+'" should satisfy the constraint "'+e+'": '+n+".")};if(e.constraints&&null!=t){var i=e.constraints,a=i.ExclusiveMaximum,s=i.ExclusiveMinimum,o=i.InclusiveMaximum,l=i.InclusiveMinimum,u=i.MaxItems,p=i.MaxLength,c=i.MinItems,d=i.MinLength,m=i.MultipleOf,h=i.Pattern,f=i.UniqueItems;if(null!=a&&t>=a&&n("ExclusiveMaximum",a),null!=s&&t<=s&&n("ExclusiveMinimum",s),null!=o&&t>o&&n("InclusiveMaximum",o),null!=l&&t<l&&n("InclusiveMinimum",l),null!=u&&t.length>u&&n("MaxItems",u),null!=p&&t.length>p&&n("MaxLength",p),null!=c&&t.length<c&&n("MinItems",c),null!=d&&t.length<d&&n("MinLength",d),null!=m&&t%m!=0&&n("MultipleOf",m),h){var y="string"==typeof h?new RegExp(h):h;"string"==typeof t&&null!==t.match(y)||n("Pattern",h)}f&&t.some((function(e,t,r){return r.indexOf(e)!==t}))&&n("UniqueItems",f)}},e.prototype.serialize=function(e,t,r){var i={},a=e.type.name;r||(r=e.serializedName),null!==a.match(/^Sequence$/gi)&&(i=[]),e.isConstant&&(t=e.defaultValue);var s=e.required,o=e.nullable;if(s&&o&&void 0===t)throw new Error(r+" cannot be undefined.");if(s&&!o&&null==t)throw new Error(r+" cannot be null or undefined.");if(!s&&!1===o&&null===t)throw new Error(r+" cannot be null.");if(null==t)i=t;else if(this.validateConstraints(e,t,r),null!==a.match(/^any$/gi))i=t;else if(null!==a.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/gi))i=function(e,t,r){if(null!=r)if(null!==e.match(/^Number$/gi)){if("number"!=typeof r)throw new Error(t+" with value "+r+" must be of type number.")}else if(null!==e.match(/^String$/gi)){if("string"!=typeof r.valueOf())throw new Error(t+' with value "'+r+'" must be of type string.')}else if(null!==e.match(/^Uuid$/gi)){if("string"!=typeof r.valueOf()||(i=r,!d.test(i)))throw new Error(t+' with value "'+r+'" must be of type string and a valid uuid.')}else if(null!==e.match(/^Boolean$/gi)){if("boolean"!=typeof r)throw new Error(t+" with value "+r+" must be of type boolean.")}else if(null!==e.match(/^Stream$/gi)){var n=typeof r;if(!("string"===n||"function"===n||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||"function"==typeof Blob&&r instanceof Blob))throw new Error(t+" must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.")}var i;return r}(a,r,t);else if(null!==a.match(/^Enum$/gi)){i=function(e,t,r){if(!t)throw new Error("Please provide a set of allowedValues to validate "+e+" as an Enum Type.");if(!t.some((function(e){return"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r})))throw new Error(r+" is not a valid value for "+e+". The valid values are: "+JSON.stringify(t)+".");return r}(r,e.type.allowedValues,t)}else null!==a.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/gi)?i=function(e,t,r){if(null!=t)if(null!==e.match(/^Date$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123 format.");t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.");t=function(e){if(!e)return;"string"==typeof e.valueOf()&&(e=new Date(e));return Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/gi)){if(!function(e){return v.test(e)}(t))throw new Error(r+' must be a string in ISO 8601 format. Instead was "'+t+'".');t=t}return t}(a,t,r):null!==a.match(/^ByteArray$/gi)?i=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=n(t)}return t}(r,t):null!==a.match(/^Base64Url$/gi)?i=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=function(e){if(!e)return;if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(e,t){var r=e.length;for(;r-1>=0&&e[r-1]===t;)--r;return e.substr(0,r)}(n(e),"=").replace(/\+/g,"-").replace(/\//g,"_")}(t)}return t}(r,t):null!==a.match(/^Sequence$/gi)?i=function(e,t,r,n){if(!Array.isArray(r))throw new Error(n+" must be of type Array.");var i=t.type.element;if(!i||"object"!=typeof i)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n+".");for(var a=[],s=0;s<r.length;s++)a[s]=e.serialize(i,r[s],n);return a}(this,e,t,r):null!==a.match(/^Dictionary$/gi)?i=function(e,t,r,n){if("object"!=typeof r)throw new Error(n+" must be of type object.");var i=t.type.value;if(!i||"object"!=typeof i)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n+".");for(var a={},s=0,o=Object.keys(r);s<o.length;s++){var l=o[s];a[l]=e.serialize(i,r[l],n+"."+l)}return a}(this,e,t,r):null!==a.match(/^Composite$/gi)&&(i=function(e,t,r,n){var i;O(e,t)&&(t=w(e,t,r,"clientName"));if(null!=r){for(var a={},s=P(e,t,n),o=0,l=Object.keys(s);o<l.length;o++){var u=l[o],p=s[u];if(!p.readOnly){var c=void 0,d=a;if(e.isXML)c=p.xmlIsWrapped?p.xmlName:p.xmlElementName||p.xmlName;else{var m=b(p.serializedName);c=m.pop();for(var h=0,f=m;h<f.length;h++){var y=f[h];null==d[y]&&null!=r[u]&&(d[y]={}),d=d[y]}}if(null!=d){var g=""!==p.serializedName?n+"."+p.serializedName:n,v=r[u],N=O(e,t);N&&N.clientName===u&&null==v&&(v=t.serializedName);var S=e.serialize(p,v,g);void 0!==S&&null!=c&&(p.xmlIsAttribute?(d.$=d.$||{},d.$[c]=S):p.xmlIsWrapped?d[c]=((i={})[p.xmlElementName]=S,i):d[c]=S)}}}var x=t.type.additionalProperties;if(x){var z=Object.keys(s),R=function(t){z.every((function(e){return e!==t}))&&(a[t]=e.serialize(x,r[t],n+'["'+t+'"]'))};for(var C in r)R(C)}return a}return r}(this,e,t,r));return i},e.prototype.deserialize=function(e,t,r){if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;var n,a=e.type.name;return r||(r=e.serializedName),null!==a.match(/^Composite$/gi)?n=function(e,t,r,n){O(e,t)&&(t=w(e,t,r,"serializedName"));for(var i=P(e,t,n),a={},s=[],o=0,l=Object.keys(i);o<l.length;o++){var u=l[o],p=i[u],c=b(i[u].serializedName);s.push(c[0]);var d=p.serializedName,m=p.xmlName,h=p.xmlElementName,f=n;""!==d&&void 0!==d&&(f=n+"."+d);var y=p.headerCollectionPrefix;if(y){for(var g={},v=0,N=Object.keys(r);v<N.length;v++){var S=N[v];S.startsWith(y)&&(g[S.substring(y.length)]=e.deserialize(p.type.value,r[S],f)),s.push(S)}a[u]=g}else if(e.isXML)if(p.xmlIsAttribute&&r.$)a[u]=e.deserialize(p,r.$[m],f);else{var z=r[h||m||d];if(p.xmlIsWrapped)void 0===(z=(z=r[m])&&z[h])&&(z=[]);a[u]=e.deserialize(p,z,f)}else{for(var R=void 0,C=r,E=0,T=c;E<T.length;E++){var M=T[E];if(!C)break;C=C[M]}R=C;var q=t.type.polymorphicDiscriminator;q&&u===q.clientName&&null==R&&(R=t.serializedName);var D=void 0;Array.isArray(r[u])&&""===i[u].serializedName?(R=r[u],a=e.deserialize(p,R,f)):void 0===R&&void 0===p.defaultValue||(D=e.deserialize(p,R,f),a[u]=D)}}var I=t.type.additionalProperties;if(I){var A=function(e){for(var t in i){if(b(i[t].serializedName)[0]===e)return!1}return!0};for(var _ in r)A(_)&&(a[_]=e.deserialize(I,r[_],n+'["'+_+'"]'))}else if(r)for(var H=0,L=Object.keys(r);H<L.length;H++){u=L[H];void 0!==a[u]||s.includes(u)||x(u)||(a[u]=r[u])}return a}(this,e,t,r):(this.isXML&&null!=t.$&&null!=t._&&(t=t._),null!==a.match(/^Number$/gi)?(n=parseFloat(t),isNaN(n)&&(n=t)):null!==a.match(/^Boolean$/gi)?n="true"===t||"false"!==t&&t:null!==a.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/gi)?n=t:null!==a.match(/^(Date|DateTime|DateTimeRfc1123)$/gi)?n=new Date(t):null!==a.match(/^UnixTime$/gi)?n=function(e){if(!e)return;return new Date(1e3*e)}(t):null!==a.match(/^ByteArray$/gi)?n=i(t):null!==a.match(/^Base64Url$/gi)?n=function(e){if(!e)return;if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return i(e=e.replace(/\-/g,"+").replace(/\_/g,"/"))}(t):null!==a.match(/^Sequence$/gi)?n=function(e,t,r,n){var i=t.type.element;if(!i||"object"!=typeof i)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n);if(r){Array.isArray(r)||(r=[r]);for(var a=[],s=0;s<r.length;s++)a[s]=e.deserialize(i,r[s],n+"["+s+"]");return a}return r}(this,e,t,r):null!==a.match(/^Dictionary$/gi)&&(n=function(e,t,r,n){var i=t.type.value;if(!i||"object"!=typeof i)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n);if(r){for(var a={},s=0,o=Object.keys(r);s<o.length;s++){var l=o[s];a[l]=e.deserialize(i,r[l],n)}return a}return r}(this,e,t,r))),e.isConstant&&(n=e.defaultValue),n},e}();function b(e){var t=[],r="";if(e)for(var n=0,i=e.split(".");n<i.length;n++){var a=i[n];"\\"===a.charAt(a.length-1)?r+=a.substr(0,a.length-1)+".":(r+=a,t.push(r),r="")}return t}function P(e,t,r){var n=t.type.modelProperties;if(!n){var i=t.type.className;if(!i)throw new Error('Class name for model "'+r+'" is not provided in the mapper "'+JSON.stringify(t,void 0,2)+'".');var a=e.modelMappers[i];if(!a)throw new Error('mapper() cannot be null or undefined for model "'+i+'".');if(!(n=a.type.modelProperties))throw new Error('modelProperties cannot be null or undefined in the mapper "'+JSON.stringify(a)+'" of type "'+i+'" for object "'+r+'".')}return n}function x(e){return["$","_"].includes(e)}function w(e,t,r,n){var i=O(e,t);if(i){var a=i[n];if(null!=a){var s=r[a];if(null!=s){var o=t.type.uberParent||t.type.className,l=s===o?s:o+"."+s,u=e.modelMappers.discriminators[l];u&&(t=u)}}}return t}function O(e,t){return t.type.polymorphicDiscriminator||z(e,t.type.uberParent)||z(e,t.type.className)}function z(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}var R=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i]=i}return t}(["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"]),C=function(){function e(e,t,n,i,a,s,o,l,u,p,c,d,m){this.streamResponseBody=s,this.url=e||"",this.method=t||"GET",this.headers=a instanceof r?a:new r(a),this.body=n,this.query=i,this.formData=void 0,this.withCredentials=o||!1,this.abortSignal=l,this.timeout=u||0,this.onUploadProgress=p,this.onDownloadProgress=c,this.proxySettings=d,this.keepAlive=m}return e.prototype.validateRequestProperties=function(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")},e.prototype.prepare=function(e){if(!e)throw new Error("options object is required");if(null==e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||null!=e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!=typeof e.url)throw new Error('options.url must be of type "string".');this.url=e.url}if(e.method){var t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){var r=e.pathTemplate,n=e.pathParameters;if("string"!=typeof r)throw new Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");var i=e.baseUrl,a=i+(i.endsWith("/")?"":"/")+(r.startsWith("/")?r.slice(1):r),s=a.match(/({\w*\s*\w*})/gi);if(s&&s.length){if(!n)throw new Error("pathTemplate: "+r+" has been provided. Hence, options.pathParameters must also be provided.");s.forEach((function(e){var t=e.slice(1,-1),i=n[t];if(null==i||"string"!=typeof i&&"object"!=typeof i){var s=JSON.stringify(n,void 0,2);throw new Error("pathTemplate: "+r+" contains the path parameter "+t+" however, it is not present in parameters: "+s+'.The value of the path parameter can either be a "string" of the form { '+t+': "some sample value" } or it can be an "object" of the form { "'+t+'": { value: "some sample value", skipUrlEncoding: true } }.')}if("string"==typeof i.valueOf()&&(a=a.replace(e,encodeURIComponent(i))),"object"==typeof i.valueOf()){if(!i.value)throw new Error("options.pathParameters["+t+'] is of type "object" but it does not contain a "value" property.');a=i.skipUrlEncoding?a.replace(e,i.value):a.replace(e,encodeURIComponent(i.value))}}))}this.url=a}if(e.queryParameters){var o=e.queryParameters;if("object"!=typeof o)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");var l=[];for(var u in this.query={},o){var p=o[u];if(p)if("string"==typeof p)l.push(u+"="+encodeURIComponent(p)),this.query[u]=encodeURIComponent(p);else if("object"==typeof p){if(!p.value)throw new Error("options.queryParameters["+u+'] is of type "object" but it does not contain a "value" property.');p.skipUrlEncoding?(l.push(u+"="+p.value),this.query[u]=p.value):(l.push(u+"="+encodeURIComponent(p.value)),this.query[u]=encodeURIComponent(p.value))}}this.url+=l.join("&")}if(e.headers)for(var c=e.headers,d=0,m=Object.keys(e.headers);d<m.length;d++){var h=m[d];this.headers.set(h,c[h])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",y()),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,null!=e.body&&(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new S(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),e.spanOptions&&(this.spanOptions=e.spanOptions),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this},e.prototype.clone=function(){var t=new e(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive);return this.formData&&(t.formData=this.formData),this.operationSpec&&(t.operationSpec=this.operationSpec),this.shouldDeserialize&&(t.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(t.operationResponseGetter=this.operationResponseGetter),t},e}(),E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function T(e,t){function r(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var M=function(){return(M=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function q(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,o)}l((n=n.apply(e,t||[])).next())}))}function D(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}function I(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function A(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e}function H(e){return this instanceof H?(this.v=e,this):new H(e)}function L(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),a=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||o(e,t)}))})}function o(e,t){try{(r=i[e](t)).value instanceof H?Promise.resolve(r.value.v).then(l,u):p(a[0][2],r)}catch(e){p(a[0][3],e)}var r}function l(e){o("next",e)}function u(e){o("throw",e)}function p(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}}function U(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:H(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function F(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=I(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}}var k=new WeakMap,B=new WeakMap,j=function(){function e(){this.onabort=null,k.set(this,[]),B.set(this,!1)}return Object.defineProperty(e.prototype,"aborted",{get:function(){if(!B.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return B.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"none",{get:function(){return new e},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t){if(!k.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");k.get(this).push(t)},e.prototype.removeEventListener=function(e,t){if(!k.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");var r=k.get(this),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.dispatchEvent=function(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")},e}();function W(e){if(!e.aborted){e.onabort&&e.onabort.call(e);var t=k.get(e);t&&t.forEach((function(t){t.call(e,{type:"abort"})})),B.set(e,!0)}}var K,V=function(e){function t(t){var r=e.call(this,t)||this;return r.name="AbortError",r}return T(t,e),t}(Error),X=(function(){function e(e){var t=this;if(this._signal=new j,e){Array.isArray(e)||(e=arguments);for(var r=0,n=e;r<n.length;r++){var i=n[r];i.aborted?this.abort():i.addEventListener("abort",(function(){t.abort()}))}}}Object.defineProperty(e.prototype,"signal",{get:function(){return this._signal},enumerable:!0,configurable:!0}),e.prototype.abort=function(){W(this._signal)},e.timeout=function(e){var t=new j,r=setTimeout(W,e,t);return"function"==typeof r.unref&&r.unref(),t}}(),function(e){function t(r,n,i,a,s){var o=e.call(this,r)||this;return o.code=n,o.statusCode=i,o.request=a,o.response=s,Object.setPrototypeOf(o,t.prototype),o}return T(t,e),t.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",t.PARSE_ERROR="PARSE_ERROR",t}(Error)),G=function(){function e(){}return e.prototype.sendRequest=function(e){var t=new XMLHttpRequest;if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");var r=e.abortSignal;if(r){if(r.aborted)return Promise.reject(new V("The operation was aborted."));var n=function(){t.abort()};r.addEventListener("abort",n),t.addEventListener("readystatechange",(function(){t.readyState===XMLHttpRequest.DONE&&r.removeEventListener("abort",n)}))}if(Q(t.upload,e.onUploadProgress),Q(t,e.onDownloadProgress),e.formData){for(var i=e.formData,a=new FormData,s=function(e,t){t&&t.hasOwnProperty("value")&&t.hasOwnProperty("options")?a.append(e,t.value,t.options):a.append(e,t)},o=0,l=Object.keys(i);o<l.length;o++){var u=l[o],p=i[u];if(Array.isArray(p))for(var c=0;c<p.length;c++)s(u,p[c]);else s(u,p)}e.body=a,e.formData=void 0;var d=e.headers.get("Content-Type");d&&-1!==d.indexOf("multipart/form-data")&&e.headers.remove("Content-Type")}t.open(e.method,e.url),t.timeout=e.timeout,t.withCredentials=e.withCredentials;for(var m=0,h=e.headers.headersArray();m<h.length;m++){var f=h[m];t.setRequestHeader(f.name,f.value)}return t.responseType=e.streamResponseBody?"blob":"text",t.send(void 0===e.body?null:e.body),e.streamResponseBody?new Promise((function(r,n){t.addEventListener("readystatechange",(function(){if(t.readyState===XMLHttpRequest.HEADERS_RECEIVED){var n=new Promise((function(r,n){t.addEventListener("load",(function(){r(t.response)})),Y(e,t,n)}));r({request:e,status:t.status,headers:$(t),blobBody:n})}})),Y(e,t,n)})):new Promise((function(r,n){t.addEventListener("load",(function(){return r({request:e,status:t.status,headers:$(t),bodyAsText:t.responseText})})),Y(e,t,n)}))},e}();function Q(e,t){t&&e.addEventListener("progress",(function(e){return t({loadedBytes:e.loaded})}))}function $(e){for(var t=new r,n=0,i=e.getAllResponseHeaders().trim().split(/[\r\n]+/);n<i.length;n++){var a=i[n],s=a.indexOf(":"),o=a.slice(0,s),l=a.slice(s+2);t.set(o,l)}return t}function Y(e,t,r){t.addEventListener("error",(function(){return r(new X("Failed to send request to "+e.url,X.REQUEST_SEND_ERROR,void 0,e))})),t.addEventListener("abort",(function(){return r(new V("The operation was aborted."))})),t.addEventListener("timeout",(function(){return r(new X("timeout of "+t.timeout+"ms exceeded",X.REQUEST_SEND_ERROR,void 0,e))}))}!function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO"}(K||(K={}));var J=function(){function e(){this._rawQuery={}}return e.prototype.any=function(){return Object.keys(this._rawQuery).length>0},e.prototype.keys=function(){return Object.keys(this._rawQuery)},e.prototype.set=function(e,t){if(e)if(null!=t){var r=Array.isArray(t)?t:t.toString();this._rawQuery[e]=r}else delete this._rawQuery[e]},e.prototype.get=function(e){return e?this._rawQuery[e]:void 0},e.prototype.toString=function(){var e="";for(var t in this._rawQuery){e&&(e+="&");var r=this._rawQuery[t];if(Array.isArray(r)){for(var n=[],i=0,a=r;i<a.length;i++){var s=a[i];n.push(t+"="+s)}e+=n.join("&")}else e+=t+"="+r}return e},e.parse=function(t){var r=new e;if(t){t.startsWith("?")&&(t=t.substring(1));for(var n="ParameterName",i="",a="",s=0;s<t.length;++s){var o=t[s];switch(n){case"ParameterName":switch(o){case"=":n="ParameterValue";break;case"&":i="",a="";break;default:i+=o}break;case"ParameterValue":switch(o){case"=":i="",a="",n="Invalid";break;case"&":r.set(i,a),i="",a="",n="ParameterName";break;default:a+=o}break;case"Invalid":"&"===o&&(n="ParameterName");break;default:throw new Error("Unrecognized URLQuery parse state: "+n)}}"ParameterValue"===n&&r.set(i,a)}return r},e}(),Z=function(){function e(){}return e.prototype.setScheme=function(e){e?this.set(e,"SCHEME"):this._scheme=void 0},e.prototype.getScheme=function(){return this._scheme},e.prototype.setHost=function(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0},e.prototype.getHost=function(){return this._host},e.prototype.setPort=function(e){null==e||""===e?this._port=void 0:this.set(e.toString(),"PORT")},e.prototype.getPort=function(){return this._port},e.prototype.setPath=function(e){e?-1!==e.indexOf("://")?this.set(e,"SCHEME"):this.set(e,"PATH"):this._path=void 0},e.prototype.appendPath=function(e){if(e){var t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}},e.prototype.getPath=function(){return this._path},e.prototype.setQuery=function(e){this._query=e?J.parse(e):void 0},e.prototype.setQueryParameter=function(e,t){e&&(this._query||(this._query=new J),this._query.set(e,t))},e.prototype.getQueryParameterValue=function(e){return this._query?this._query.get(e):void 0},e.prototype.getQuery=function(){return this._query?this._query.toString():void 0},e.prototype.set=function(e,t){for(var r=new te(e,t);r.next();){var n=r.current();if(n)switch(n.type){case"SCHEME":this._scheme=n.text||void 0;break;case"HOST":this._host=n.text||void 0;break;case"PORT":this._port=n.text||void 0;break;case"PATH":var i=n.text||void 0;this._path&&"/"!==this._path&&"/"===i||(this._path=i);break;case"QUERY":this._query=J.parse(n.text);break;default:throw new Error("Unrecognized URLTokenType: "+n.type)}}},e.prototype.toString=function(){var e="";return this._scheme&&(e+=this._scheme+"://"),this._host&&(e+=this._host),this._port&&(e+=":"+this._port),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+="?"+this._query.toString()),e},e.prototype.replaceAll=function(e,t){e&&(this.setScheme(N(this.getScheme(),e,t)),this.setHost(N(this.getHost(),e,t)),this.setPort(N(this.getPort(),e,t)),this.setPath(N(this.getPath(),e,t)),this.setQuery(N(this.getQuery(),e,t)))},e.parse=function(t){var r=new e;return r.set(t,"SCHEME_OR_HOST"),r},e}(),ee=function(){function e(e,t){this.text=e,this.type=t}return e.scheme=function(t){return new e(t,"SCHEME")},e.host=function(t){return new e(t,"HOST")},e.port=function(t){return new e(t,"PORT")},e.path=function(t){return new e(t,"PATH")},e.query=function(t){return new e(t,"QUERY")},e}();var te=function(){function e(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=null!=t?t:"SCHEME_OR_HOST",this._currentIndex=0}return e.prototype.current=function(){return this._currentToken},e.prototype.next=function(){if(re(this))switch(this._currentState){case"SCHEME":t=function(e){return se(e,(function(e){return function(e){var t=e.charCodeAt(0);return 48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122}(e)}))}(e=this),e._currentToken=ee.scheme(t),re(e)?e._currentState="HOST":e._currentState="DONE";break;case"SCHEME_OR_HOST":!function(e){var t=oe(e,":","/","?");re(e)?":"===ne(e)?"://"===ae(e,3)?(e._currentToken=ee.scheme(t),e._currentState="HOST"):(e._currentToken=ee.host(t),e._currentState="PORT"):(e._currentToken=ee.host(t),"/"===ne(e)?e._currentState="PATH":e._currentState="QUERY"):(e._currentToken=ee.host(t),e._currentState="DONE")}(this);break;case"HOST":!function(e){"://"===ae(e,3)&&ie(e,3);var t=oe(e,":","/","?");e._currentToken=ee.host(t),re(e)?":"===ne(e)?e._currentState="PORT":"/"===ne(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function(e){":"===ne(e)&&ie(e);var t=oe(e,"/","?");e._currentToken=ee.port(t),re(e)?"/"===ne(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":!function(e){var t=oe(e,"?");e._currentToken=ee.path(t),re(e)?e._currentState="QUERY":e._currentState="DONE"}(this);break;case"QUERY":!function(e){"?"===ne(e)&&ie(e);var t=function(e){var t="";e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength);return t}(e);e._currentToken=ee.query(t),e._currentState="DONE"}(this);break;default:throw new Error("Unrecognized URLTokenizerState: "+this._currentState)}else this._currentToken=void 0;var e,t;return!!this._currentToken},e}();function re(e){return e._currentIndex<e._textLength}function ne(e){return e._text[e._currentIndex]}function ie(e,t){re(e)&&(t||(t=1),e._currentIndex+=t)}function ae(e,t){var r=e._currentIndex+t;return e._textLength<r&&(r=e._textLength),e._text.substring(e._currentIndex,r)}function se(e,t){for(var r="";re(e);){var n=ne(e);if(!t(n))break;r+=n,ie(e)}return r}function oe(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return se(e,(function(e){return-1===t.indexOf(e)}))}var le=function(){function e(e,t){this._nextPolicy=e,this._options=t}return e.prototype.shouldLog=function(e){return this._options.shouldLog(e)},e.prototype.log=function(e,t){this._options.log(e,t)},e}(),ue=function(){function e(e){this._logger=e}return e.prototype.shouldLog=function(e){return!!this._logger&&e!==K.OFF&&e<=this._logger.minimumLogLevel},e.prototype.log=function(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)},e}(),pe=console.debug||console.log;var ce,de="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0,me=[],he=[],fe=[];function ye(e){var t,r,n,i;ce=e,me=[],he=[];var a=/\*/g,s=e.split(",").map((function(e){return e.trim().replace(a,".*?")}));try{for(var o=I(s),l=o.next();!l.done;l=o.next()){var u=l.value;u.startsWith("-")?he.push(new RegExp("^"+u.substr(1)+"$")):me.push(new RegExp("^"+u+"$"))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}try{for(var p=I(fe),c=p.next();!c.done;c=p.next()){var d=c.value;d.enabled=ge(d.namespace)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}function ge(e){var t,r,n,i;if(e.endsWith("*"))return!0;try{for(var a=I(he),s=a.next();!s.done;s=a.next()){if(s.value.test(e))return!1}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}try{for(var o=I(me),l=o.next();!l.done;l=o.next()){if(l.value.test(e))return!0}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1}function ve(e){var t=Object.assign((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];t.enabled&&(r.length>0&&(r[0]=e+" "+r[0]),t.log.apply(t,_(r)))}),{enabled:ge(e),destroy:Ne,log:Pe.log,namespace:e,extend:Se});return fe.push(t),t}function Ne(){var e=fe.indexOf(this);return e>=0&&(fe.splice(e,1),!0)}function Se(e){var t=ve(this.namespace+":"+e);return t.log=this.log,t}de&&ye(de);var be,Pe=Object.assign((function(e){return ve(e)}),{enable:ye,enabled:ge,disable:function(){var e=ce||"";return ye(""),e},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];pe.apply(void 0,_(e))}}),xe=new Set,we="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,Oe=Pe("azure");Oe.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Pe.log.apply(Pe,_(e))};var ze=["verbose","info","warning","error"];we&&(qe(we)?function(e){var t,r;if(e&&!qe(e))throw new Error("Unknown log level '"+e+"'. Acceptable values: "+ze.join(","));be=e;var n=[];try{for(var i=I(xe),a=i.next();!a.done;a=i.next()){var s=a.value;Me(s)&&n.push(s.namespace)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}Pe.enable(n.join(","))}(we):console.error("AZURE_LOG_LEVEL set to unknown log level '"+we+"'; logging is not enabled. Acceptable values: "+ze.join(", ")+"."));var Re={verbose:400,info:300,warning:200,error:100};function Ce(e){var t=Oe.extend(e);return Ee(Oe,t),{error:Te(t,"error"),warning:Te(t,"warning"),info:Te(t,"info"),verbose:Te(t,"verbose")}}function Ee(e,t){t.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.log.apply(e,_(t))}}function Te(e,t){var r=Object.assign(e.extend(t),{level:t});if(Ee(e,r),Me(r)){var n=Pe.disable();Pe.enable(n+","+r.namespace)}return xe.add(r),r}function Me(e){return!!(be&&Re[e.level]<=Re[be])}function qe(e){return ze.includes(e)}var De=Ce("core-http"),Ie=["x-ms-client-request-id","x-ms-return-client-request-id","traceparent","Accept","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent"],Ae=["api-version"];function _e(e){return void 0===e&&(e={}),{create:function(t,r){return new He(t,r,e)}}}var He=function(e){function t(t,r,n){var i=void 0===n?{}:n,a=i.logger,s=void 0===a?De.info:a,o=i.allowedHeaderNames,l=void 0===o?[]:o,u=i.allowedQueryParameters,p=void 0===u?[]:u,c=e.call(this,t,r)||this;return c.logger=s,l=Array.isArray(l)?Ie.concat(l):Ie,p=Array.isArray(p)?Ae.concat(p):Ae,c.allowedHeaderNames=new Set(l.map((function(e){return e.toLowerCase()}))),c.allowedQueryParameters=new Set(p.map((function(e){return e.toLowerCase()}))),c}return T(t,e),t.prototype.sendRequest=function(e){var t=this;return this.logger.enabled?(this.logRequest(e),this._nextPolicy.sendRequest(e).then((function(e){return t.logResponse(e)}))):this._nextPolicy.sendRequest(e)},t.prototype.logRequest=function(e){this.logger("Request: "+JSON.stringify(e,this.sanitize.bind(this),2))},t.prototype.sanitize=function(e,t){return"_headersMap"===e?this.sanitizeHeaders(e,t):"url"===e?this.sanitizeUrl(t):"query"===e?this.sanitizeQuery(t):"body"!==e&&"response"!==e&&"operationSpec"!==e?t:void 0},t.prototype.sanitizeHeaders=function(e,t){return this.sanitizeObject(t,this.allowedHeaderNames,(function(e,t){return e[t].value}))},t.prototype.sanitizeQuery=function(e){return this.sanitizeObject(e,this.allowedQueryParameters,(function(e,t){return e[t]}))},t.prototype.sanitizeObject=function(e,t,r){if("object"!=typeof e||null===e)return e;for(var n={},i=0,a=Object.keys(e);i<a.length;i++){var s=a[i];t.has(s.toLowerCase())?n[s]=r(e,s):n[s]="REDACTED"}return n},t.prototype.sanitizeUrl=function(e){if("string"!=typeof e||null===e)return e;var t=Z.parse(e),r=t.getQuery();if(!r)return e;for(var n=J.parse(r),i=0,a=n.keys();i<a.length;i++){var s=a[i];this.allowedQueryParameters.has(s.toLowerCase())||n.set(s,"REDACTED")}return t.setQuery(n.toString()),t.toString()},t.prototype.logResponse=function(e){return this.logger("Response status code: "+e.status),this.logger("Headers: "+JSON.stringify(e.headers,this.sanitize.bind(this),2)),e},t}(le);function Le(e){return Ue(e.parameterPath,e.mapper)}function Ue(e,t){return"string"==typeof e?e:Array.isArray(e)?e.join("."):t.serializedName}function Fe(e){var t=!1;for(var r in e.responses){var n=e.responses[r];if(n.bodyMapper&&n.bodyMapper.type.name===R.Stream){t=!0;break}}return t}var ke=document.implementation.createDocument(null,null,null),Be=new DOMParser;function je(e,t){try{var r=Be.parseFromString(e,"application/xml");!function(e){if(We){var t=e.getElementsByTagNameNS(We,"parsererror");if(t.length)throw new Error(t.item(0).innerHTML)}}(r);var n=void 0;return n=t&&t.includeRoot?Ke(r):Ke(r.childNodes[0]),Promise.resolve(n)}catch(e){return Promise.reject(e)}}var We="";try{We=Be.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){}function Ke(e){var t={},r=e.childNodes.length,n=e.childNodes[0],i=n&&1===r&&n.nodeType===Node.TEXT_NODE&&n.nodeValue||void 0,a=function(e){return function(e){return!!e.attributes}(e)&&e.hasAttributes()?e:void 0}(e);if(a){t.$={};for(var s=0;s<a.attributes.length;s++){var o=a.attributes[s];t.$[o.nodeName]=o.nodeValue}i&&(t._=i)}else 0===r?t="":i&&(t=i);if(!i)for(s=0;s<r;s++){var l=e.childNodes[s];if(l.nodeType!==Node.TEXT_NODE){var u=Ke(l);t[l.nodeName]?Array.isArray(t[l.nodeName])?t[l.nodeName].push(u):t[l.nodeName]=[t[l.nodeName],u]:t[l.nodeName]=u}}return t}var Ve=new XMLSerializer;function Xe(e,t){var r=function e(t,r){if(null==t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return(p=ke.createElement(r)).textContent=null==t?"":t.toString(),[p];if(Array.isArray(t)){for(var n=[],i=0,a=t;i<a.length;i++)for(var s=a[i],o=0,l=e(s,r);o<l.length;o++){var u=l[o];n.push(u)}return n}if("object"==typeof t){for(var p=ke.createElement(r),c=0,d=Object.keys(t);c<d.length;c++){var m=d[c];if("$"===m)for(var h=0,f=Ge(t[m]);h<f.length;h++){var y=f[h];p.attributes.setNamedItem(y)}else if("_"===m)p.textContent=t[m].toString();else for(var g=0,v=e(t[m],m);g<v.length;g++){u=v[g];p.appendChild(u)}}return[p]}throw new Error("Illegal value passed to buildObject: "+t)}(e,t&&t.rootName||"root")[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+Ve.serializeToString(r)}function Ge(e){for(var t=[],r=0,n=Object.keys(e);r<n.length;r++){var i=n[r],a=ke.createAttribute(i);a.value=e[i].toString(),t.push(a)}return t}function Qe(e){return{create:function(t,r){return new Je(t,e,r)}}}var $e=["application/json","text/json","text/plain"],Ye=["application/xml","application/atom+xml"],Je=function(e){function t(t,r,n){var i=e.call(this,t,n)||this;return i.jsonContentTypes=r&&r.json||$e,i.xmlContentTypes=r&&r.xml||Ye,i}return T(t,e),t.prototype.sendRequest=function(e){return q(this,void 0,void 0,(function(){var t=this;return D(this,(function(r){return[2,this._nextPolicy.sendRequest(e).then((function(e){return function(e,t,r){return function(e,t,r){var n=function(e){var t='Error "'+e+'" occurred while parsing the response body - '+r.bodyAsText+".",n=e.code||X.PARSE_ERROR,i=new X(t,n,r.status,r.request,r);return Promise.reject(i)};if(!r.request.streamResponseBody&&r.bodyAsText){var i=r.bodyAsText,a=r.headers.get("Content-Type")||"",s=a?a.split(";").map((function(e){return e.toLowerCase()})):[];if(0===s.length||s.some((function(t){return-1!==e.indexOf(t)})))return new Promise((function(e){r.parsedBody=JSON.parse(i),e(r)})).catch(n);if(s.some((function(e){return-1!==t.indexOf(e)})))return je(i).then((function(e){return r.parsedBody=e,r})).catch(n)}return Promise.resolve(r)}(e,t,r).then((function(e){if(function(e){var t,r=e.request.shouldDeserialize;t=void 0===r||("boolean"==typeof r?r:r(e));return t}(e)){var t=e.request.operationSpec;if(t&&t.responses){var n=e.status,i=Object.keys(t.responses),a=0===i.length||1===i.length&&"default"===i[0],s=function(e){var t,r=e.request,n=r.operationSpec;if(n){var i=r.operationResponseGetter;t=i?i(n,e):n.responses[e.status]}return t}(e);if(a?200<=n&&n<300:!!s){if(s){if(s.bodyMapper){y=e.parsedBody;t.isXML&&s.bodyMapper.type.name===R.Sequence&&(y="object"==typeof y?y[s.bodyMapper.xmlElementName]:[]);try{e.parsedBody=t.serializer.deserialize(s.bodyMapper,y,"operationRes.parsedBody")}catch(p){var o=new X("Error "+p+" occurred in deserializing the responseBody - "+e.bodyAsText);return o.request=f(e.request),o.response=h(e),Promise.reject(o)}}else"HEAD"===t.httpMethod&&(e.parsedBody=r.status>=200&&r.status<300);s.headersMapper&&(e.parsedHeaders=t.serializer.deserialize(s.headersMapper,e.headers.rawHeaders(),"operationRes.parsedHeaders"))}}else{var l=t.responses.default;if(l){var u=Fe(t)?"Unexpected status code: "+n:e.bodyAsText,p=new X(u);p.statusCode=n,p.request=f(e.request),p.response=h(e);var c=e.parsedBody;try{if(c){var d=l.bodyMapper;if(d&&"CloudError"===d.serializedName)c.error&&(c=c.error),c.code&&(p.code=c.code),c.message&&(p.message=c.message);else{var m=c;c.error&&(m=c.error),p.code=m.code,m.message&&(p.message=m.message)}if(d){var y=c;t.isXML&&d.type.name===R.Sequence&&(y="object"==typeof c?c[d.xmlElementName]:[]),p.response.parsedBody=t.serializer.deserialize(d,y,"error.response.parsedBody")}}e.headers&&l.headersMapper&&(p.response.parsedHeaders=t.serializer.deserialize(l.headersMapper,e.headers.rawHeaders(),"operationRes.parsedHeaders"))}catch(t){p.message='Error "'+t.message+'" occurred in deserializing the responseBody - "'+e.bodyAsText+'" for the default response.'}return Promise.reject(p)}}}}return Promise.resolve(e)}))}(t.jsonContentTypes,t.xmlContentTypes,e)}))]}))}))},t}(le);var Ze,et=3e4,tt=3,rt=9e4;!function(e){e[e.Exponential=0]="Exponential"}(Ze||(Ze={}));var nt=function(e){function t(t,r,n,i,a){var s=e.call(this,t,r)||this;function o(e){return"number"==typeof e}return s.retryCount=o(n)?n:tt,s.retryInterval=o(i)?i:et,s.maxRetryInterval=o(a)?a:rt,s}return T(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then((function(r){return it(t,e,r)})).catch((function(r){return it(t,e,r.response,void 0,r)}))},t}(le);function it(e,t,r,n,i){n=function(e,t,r){t||(t={retryCount:0,retryInterval:0}),r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;var n=Math.pow(2,t.retryCount)-1;return n*=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval)),t.retryInterval=Math.min(n,e.maxRetryInterval),t}(e,n,i);var a=t.abortSignal&&t.abortSignal.aborted;if(!a&&function(e,t,r){if(null==t||t<500&&408!==t||501===t||505===t)return!1;if(!r)throw new Error("retryData for the ExponentialRetryPolicyFilter cannot be null.");return(r&&r.retryCount)<e.retryCount}(e,r&&r.status,n))return De.info("Retrying request in "+n.retryInterval),g(n.retryInterval).then((function(){return e._nextPolicy.sendRequest(t.clone())})).then((function(r){return it(e,t,r,n,void 0)})).catch((function(i){return it(e,t,r,n,i)}));if(a||i||!r){var s=n.error||new X("Failed to send the request.",X.REQUEST_SEND_ERROR,r&&r.status,r&&r.request,r);return Promise.reject(s)}return Promise.resolve(r)}function at(e){return void 0===e&&(e="x-ms-client-request-id"),{create:function(t,r){return new st(t,r,e)}}}var st=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i._requestIdHeaderName=n,i}return T(t,e),t.prototype.sendRequest=function(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,y()),this._nextPolicy.sendRequest(e)},t}(le);function ot(){return"x-ms-command-name"}var lt=ot;function ut(){var e,t,r,n,i=[{key:"core-http",value:c.coreHttpVersion}],a=[{key:"OS",value:((e=window.navigator).oscpu||e.platform).replace(" ","")}];return t=i.concat(a),void 0===r&&(r=" "),void 0===n&&(n="/"),t.map((function(e){var t=e.value?""+n+e.value:"";return""+e.key+t})).join(r)}var pt=function(e){function t(t,r,n,i){var a=e.call(this,t,r)||this;return a._nextPolicy=t,a._options=r,a.headerKey=n,a.headerValue=i,a}return T(t,e),t.prototype.sendRequest=function(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)},t.prototype.addUserAgentHeader=function(e){e.headers||(e.headers=new r),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)},t}(le);var ct=function(e){function t(t,r,n){void 0===n&&(n=20);var i=e.call(this,t,r)||this;return i.maxRetries=n,i}return T(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e).then((function(e){return function e(t,r,n){var i=r.request,a=r.status;var s=r.headers.get("location");if(s&&(300===a||307===a||303===a&&"POST"===i.method)&&(!t.maxRetries||n<t.maxRetries)){var o=Z.parse(i.url);return o.setPath(s),i.url=o.toString(),303===a&&(i.method="GET"),t._nextPolicy.sendRequest(i).then((function(r){return e(t,r,n+1)}))}return Promise.resolve(r)}(t,e,0)}))},t}(le);var dt=function(e){function t(t,r,n){void 0===n&&(n=30);var i=e.call(this,t,r)||this;return i._retryTimeout=n,i}return T(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then((function(r){return function(e,t,r){if(409===r.status){var n=function(e){var t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){var n=r.error.message.match(/.*'(.*)'/i);n&&(t=n.pop())}}return t}(r.bodyAsText);if(n){var i=function(e){var t,r=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!r||!r[0])throw new Error("Unable to extract subscriptionId from the given url - "+e+".");t=r[0];return t}(t.url);return function(e,t,r,n){var i=t+"providers/"+r+"/register?api-version=2016-02-01",a=t+"providers/"+r+"?api-version=2016-02-01",s=mt(n);return s.method="POST",s.url=i,e._nextPolicy.sendRequest(s).then((function(t){if(200!==t.status)throw new Error("Autoregistration of "+r+" failed. Please try registering manually.");return function e(t,r,n){var i=mt(n);i.url=r;i.method="GET";return t._nextPolicy.sendRequest(i).then((function(i){var a=i.parsedBody;return!(!i.parsedBody||!a.registrationState||"Registered"!==a.registrationState)||g(1e3*t._retryTimeout).then((function(){return e(t,r,n)}))}))}(e,a,n)}))}(e,i,n,t).catch((function(){return!1})).then((function(n){return n?(t.headers.set("x-ms-client-request-id",y()),e._nextPolicy.sendRequest(t.clone())):r}))}}return Promise.resolve(r)}(t,e,r)}))},t}(le);function mt(e,t){void 0===t&&(t=!1);var r=e.clone();return t&&(r.url=e.url),r.headers.set("x-ms-client-request-id",y()),r.headers.set("Content-Type","application/json; charset=utf-8"),r}var ht=12e4,ft=function(){function e(e){void 0===e&&(e=ht),this.cachedToken=void 0,this.tokenRefreshBufferMs=e}return e.prototype.setCachedToken=function(e){this.cachedToken=e},e.prototype.getCachedToken=function(){return this.cachedToken&&Date.now()+this.tokenRefreshBufferMs>=this.cachedToken.expiresOnTimestamp&&(this.cachedToken=void 0),this.cachedToken},e}();var yt=function(e){function t(t,r,n,i,a){var s=e.call(this,t,r)||this;return s.credential=n,s.scopes=i,s.tokenCache=a,s}return T(t,e),t.prototype.sendRequest=function(e){return q(this,void 0,void 0,(function(){var t;return D(this,(function(n){switch(n.label){case 0:return e.headers||(e.headers=new r),[4,this.getToken({abortSignal:e.abortSignal,tracingOptions:{spanOptions:e.spanOptions}})];case 1:return t=n.sent(),e.headers.set(c.HeaderConstants.AUTHORIZATION,"Bearer "+t),[2,this._nextPolicy.sendRequest(e)]}}))}))},t.prototype.getToken=function(e){return q(this,void 0,void 0,(function(){var t;return D(this,(function(r){switch(r.label){case 0:return void 0!==(t=this.tokenCache.getCachedToken())?[3,2]:[4,this.credential.getToken(this.scopes,e)];case 1:t=r.sent()||void 0,this.tokenCache.setCachedToken(t),r.label=2;case 2:return[2,t?t.token:void 0]}}))}))},t}(le);var gt,vt=function(e){function t(t,r,n,i,a,s){var o=e.call(this,t,r)||this;return o.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,o.DEFAULT_CLIENT_RETRY_COUNT=3,o.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,o.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,o.retryCount="number"==typeof n?n:o.DEFAULT_CLIENT_RETRY_COUNT,o.retryInterval="number"==typeof i?i:o.DEFAULT_CLIENT_RETRY_INTERVAL,o.minRetryInterval="number"==typeof a?a:o.DEFAULT_CLIENT_MIN_RETRY_INTERVAL,o.maxRetryInterval="number"==typeof s?s:o.DEFAULT_CLIENT_MAX_RETRY_INTERVAL,o}return T(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then((function(r){return function e(t,r,n,i,a){i=function(e,t,r){t||(t={retryCount:0,retryInterval:0});r&&(t.error&&(r.innerError=t.error),t.error=r);t.retryCount++;var n=Math.pow(2,t.retryCount)-1,i=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval));return n*=i,t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}(t,i,a);return a&&a.code&&function(e,t){var r;if(!t)throw new Error("retryData for the SystemErrorRetryPolicyFilter cannot be null.");r=t&&t.retryCount;return r<e.retryCount}(t,i)&&("ETIMEDOUT"===a.code||"ESOCKETTIMEDOUT"===a.code||"ECONNREFUSED"===a.code||"ECONNRESET"===a.code||"ENOENT"===a.code)?g(i.retryInterval).then((function(){return t._nextPolicy.sendRequest(r.clone())})).then((function(n){return e(t,r,n,i,a)})).catch((function(a){return e(t,r,n,i,a)})):null!=a?(a=i.error,Promise.reject(a)):Promise.resolve(n)}(t,e,r)}))},t}(le);!function(e){e.Csv=",",e.Ssv=" ",e.Tsv="\t",e.Pipes="|",e.Multi="Multi"}(gt||(gt={}));var Nt=new Error("ProxyPolicy is not supported in browser environment");!function(e){function t(t,r){e.call(this,t,r);throw Nt}T(t,e),t.prototype.sendRequest=function(e){throw Nt}}(le);var St=c.HttpConstants.StatusCodes;var bt=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i._handleResponse=n||i._defaultResponseHandler,i}return T(t,e),t.prototype.sendRequest=function(e){return q(this,void 0,void 0,(function(){var t=this;return D(this,(function(r){return[2,this._nextPolicy.sendRequest(e.clone()).then((function(r){return r.status!==St.TooManyRequests?r:t._handleResponse(e,r)}))]}))}))},t.prototype._defaultResponseHandler=function(e,r){return q(this,void 0,void 0,(function(){var n,i,a=this;return D(this,(function(s){return(n=r.headers.get(c.HeaderConstants.RETRY_AFTER))&&(i=t.parseRetryAfterHeader(n))?[2,g(i).then((function(t){return a._nextPolicy.sendRequest(e)}))]:[2,r]}))}))},t.parseRetryAfterHeader=function(e){var r=Number(e);return Number.isNaN(r)?t.parseDateRetryAfterHeader(e):1e3*r},t.parseDateRetryAfterHeader=function(e){try{var t=Date.now(),r=Date.parse(e)-t;return Number.isNaN(r)?void 0:r}catch(e){return}},t}(le);var Pt=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i.authenticationProvider=n,i}return T(t,e),t.prototype.signRequest=function(e){return this.authenticationProvider.signRequest(e)},t.prototype.sendRequest=function(e){var t=this;return this.signRequest(e).then((function(e){return t._nextPolicy.sendRequest(e)}))},t}(le),xt={enable:!0};var wt=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i.keepAliveOptions=n,i}return T(t,e),t.prototype.sendRequest=function(e){return q(this,void 0,void 0,(function(){return D(this,(function(t){return e.keepAlive=this.keepAliveOptions.enable,[2,this._nextPolicy.sendRequest(e)]}))}))},t}(le),Ot=function(){function e(){}return e.prototype.context=function(){return{spanId:"",traceId:""}},e.prototype.end=function(e){},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.isRecordingEvents=function(){return!1},e}(),zt=function(){function e(){}return e.prototype.toBytes=function(e){return new ArrayBuffer(0)},e.prototype.fromBytes=function(e){return null},e}(),Rt=function(){function e(){}return e.prototype.inject=function(e,t,r){},e.prototype.extract=function(e,t){return null},e}(),Ct=function(){function e(){}return e.prototype.startSpan=function(e,t){return new Ot},e.prototype.getCurrentSpan=function(){return new Ot},e.prototype.withSpan=function(e,t){return t()},e.prototype.bind=function(e,t){return e},e.prototype.recordSpanData=function(e){},e.prototype.getBinaryFormat=function(){return new zt},e.prototype.getHttpTextFormat=function(){return new Rt},e}();var Et,Tt,Mt,qt,Dt=1,It=Symbol.for("@azure/core-tracing.tracerCache");function At(){var e=self,t=e[It];if(t){if(t.version!==Dt)throw new Error("Two incompatible versions of @azure/core-tracing have been loaded.\n         This library is "+Dt+", existing is "+t.version+".");Et=t}else Et={tracer:void 0,version:Dt},e[It]=Et}function _t(){return Et||At(),Et}function Ht(){var e=_t();return e.tracer||(e.tracer=new Ct),e.tracer}
/*!
     * Copyright 2019, OpenTelemetry Authors
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *      https://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(Tt||(Tt={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(Mt||(Mt={})),function(e){e[e.UNSAMPLED=0]="UNSAMPLED",e[e.SAMPLED=1]="SAMPLED"}(qt||(qt={}));var Lt="00";var Ut=function(e){function t(t,r){return e.call(this,t,r)||this}return T(t,e),t.prototype.sendRequest=function(e){return q(this,void 0,void 0,(function(){var t,r,n,i,a,s,o;return D(this,(function(l){switch(l.label){case 0:if(!e.spanOptions||!e.spanOptions.parent)return[2,this._nextPolicy.sendRequest(e)];t=Ht(),r=t.startSpan("core-http",e.spanOptions),l.label=1;case 1:return l.trys.push([1,3,,4]),n=r.context(),(i=function(e){var t=[];if(e.traceId||t.push("traceId"),e.spanId||t.push("spanId"),!t.length){var r=(e.traceFlags||qt.UNSAMPLED).toString(16),n=1===r.length?"0"+r:r;return Lt+"-"+e.traceId+"-"+e.spanId+"-"+n}}(n))&&(e.headers.set("traceparent",i),(a=n.traceState&&n.traceState.serialize())&&e.headers.set("tracestate",a)),[4,this._nextPolicy.sendRequest(e)];case 2:return s=l.sent(),r.end(),[2,s];case 3:throw o=l.sent(),r.end(),o;case 4:return[2]}}))}))},t}(le),Ft=function(){function e(e,t){var r,n,i,a,s,o=this;if(t||(t={}),this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||new G,this._requestPolicyOptions=new ue(t.httpPipelineLogger),Array.isArray(t.requestPolicyFactories))De.info("ServiceClient: using custom request policies"),r=t.requestPolicyFactories;else{var l=void 0;if((s=e)&&"function"==typeof s.getToken&&(void 0===s.signRequest||s.getToken.length>0)){De.info("ServiceClient: creating bearer token authentication policy from provided credentials");i=void 0,a=o,l={create:function(t,r){return void 0===i&&(i=function(e,t){var r=new ft;return{create:function(n,i){return new yt(n,i,e,t,r)}}}(e,(a.baseUri||"")+"/.default")),i.create(t,r)}}}else if(e&&"function"==typeof e.signRequest)De.info("ServiceClient: creating signing policy from provided credentials"),n=e,l={create:function(e,t){return new Pt(e,t,n)}};else if(void 0!==e)throw new Error("The credentials argument must implement the TokenCredential interface");if(De.info("ServiceClient: using default request policies"),r=function(e,t){var r=[];t.generateClientRequestIdHeader&&r.push(at(t.clientRequestIdHeaderName));e&&r.push(e);var n=kt(t.userAgentHeaderName,lt),i=kt(t.userAgent,ut);n&&i&&r.push((s=(a={key:n,value:i})&&null!=a.key?a.key:"x-ms-command-name",o=a&&null!=a.value?a.value:ut(),{create:function(e,t){return new pt(e,t,s,o)}}));var a,s,o;r.push(function(e){return void 0===e&&(e=20),{create:function(t,r){return new ct(t,r,e)}}}()),r.push(function(e){return void 0===e&&(e=30),{create:function(t,r){return new dt(t,r,e)}}}(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(r.push({create:function(e,t){return new nt(e,t,l,u,p)}}),r.push(function(e,t,r,n){return{create:function(i,a){return new vt(i,a,e,t,r,n)}}}()),r.push({create:function(e,t){return new bt(e,t)}}));var l,u,p;r.push(Qe(t.deserializationContentTypes)),t.proxySettings?r.push({create:function(e,t){throw Nt}}):void 0;return r.push(_e({logger:De.info})),r}(l,t),t.requestPolicyFactories){var u=t.requestPolicyFactories(r);u&&(r=u)}}this._requestPolicyFactories=r}return e.prototype.sendRequest=function(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");var t;try{e instanceof C?(e.validateRequestProperties(),t=e):t=(t=new C).prepare(e)}catch(e){return Promise.reject(e)}var r=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(var n=this._requestPolicyFactories.length-1;n>=0;--n)r=this._requestPolicyFactories[n].create(r,this._requestPolicyOptions);return r.sendRequest(t)},e.prototype.sendOperationRequest=function(e,t,r){return q(this,void 0,void 0,(function(){var n,i,a,s,o,l,u,p,c,d,m,h,f,y,g,v,N,S,b,P,x,w,O,z,E,T,M,q,I,A;return D(this,(function(D){switch(D.label){case 0:"function"==typeof e.options&&(r=e.options,e.options=void 0),n=new C,D.label=1;case 1:if(D.trys.push([1,6,,7]),!(a=t.baseUrl||this.baseUri))throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");if(n.method=t.httpMethod,n.operationSpec=t,s=Z.parse(a),t.path&&s.appendPath(t.path),t.urlParameters&&t.urlParameters.length>0)for(o=0,l=t.urlParameters;o<l.length;o++)u=l[o],p=Bt(this,e,u,t.serializer),p=t.serializer.serialize(u.mapper,p,Le(u)),u.skipEncoding||(p=encodeURIComponent(p)),s.replaceAll("{"+(u.mapper.serializedName||Le(u))+"}",p);if(t.queryParameters&&t.queryParameters.length>0)for(c=0,d=t.queryParameters;c<d.length;c++)if(m=d[c],null!=(h=Bt(this,e,m,t.serializer))){if(h=t.serializer.serialize(m.mapper,h,Le(m)),null!=m.collectionFormat)if(m.collectionFormat===gt.Multi)if(0===h.length)h="";else for(y in h)f=h[y],h[y]=null==f?"":f.toString();else h=h.join(m.collectionFormat);if(!m.skipEncoding)if(Array.isArray(h))for(y in h)h[y]=encodeURIComponent(h[y]);else h=encodeURIComponent(h);s.setQueryParameter(m.mapper.serializedName||Le(m),h)}if(n.url=s.toString(),(g=t.contentType||this.requestContentType)&&n.headers.set("Content-Type",g),t.headerParameters)for(v=0,N=t.headerParameters;v<N.length;v++)if(S=N[v],null!=(b=Bt(this,e,S,t.serializer)))if(b=t.serializer.serialize(S.mapper,b,Le(S)),P=S.mapper.headerCollectionPrefix)for(x=0,w=Object.keys(b);x<w.length;x++)O=w[x],n.headers.set(P+O,b[O]);else n.headers.set(S.mapper.serializedName||Le(S),b);if(z=e.options){if(z.customHeaders)for(E in z.customHeaders)n.headers.set(E,z.customHeaders[E]);z.abortSignal&&(n.abortSignal=z.abortSignal),z.timeout&&(n.timeout=z.timeout),z.onUploadProgress&&(n.onUploadProgress=z.onUploadProgress),z.onDownloadProgress&&(n.onDownloadProgress=z.onDownloadProgress),z.spanOptions&&(n.spanOptions=z.spanOptions)}n.withCredentials=this._withCredentials,function(e,t,r,n){if(n.requestBody&&n.requestBody.mapper){t.body=Bt(e,r,n.requestBody,n.serializer);var i=n.requestBody.mapper,a=i.required,s=i.xmlName,o=i.xmlElementName,l=i.serializedName,u=i.type.name;try{if(null!=t.body||a){var p=Le(n.requestBody);t.body=n.serializer.serialize(i,t.body,p);var c=u===R.Stream;n.isXML?u===R.Sequence?t.body=Xe(function(e,t){var r;return Array.isArray(e)||(e=[e]),(r={})[t]=e,r}(t.body,o||s||l),{rootName:s||l}):c||(t.body=Xe(t.body,{rootName:s||l})):c||(t.body=JSON.stringify(t.body))}}catch(e){throw new Error('Error "'+e.message+'" occurred in serializing the payload - '+JSON.stringify(l,void 0,"  ")+".")}}else if(n.formDataParameters&&n.formDataParameters.length>0){t.formData={};for(var d=0,m=n.formDataParameters;d<m.length;d++){var h=m[d],f=Bt(e,r,h,n.serializer);if(null!=f){var y=h.mapper.serializedName||Le(h);t.formData[y]=n.serializer.serialize(h.mapper,f,Le(h))}}}}(this,n,e,t),null==n.streamResponseBody&&(n.streamResponseBody=Fe(t)),T=void 0,M=void 0,D.label=2;case 2:return D.trys.push([2,4,,5]),[4,this.sendRequest(n)];case 3:return T=D.sent(),[3,5];case 4:return q=D.sent(),M=q,[3,5];case 5:return M?(M.response&&(M.details=Wt(M.response,t.responses[M.statusCode]||t.responses.default)),i=Promise.reject(M)):i=Promise.resolve(Wt(T,t.responses[T.status])),[3,7];case 6:return I=D.sent(),i=Promise.reject(I),[3,7];case 7:return(A=r)&&i.then((function(e){return A(null,e._response.parsedBody,e._response.request,e._response)})).catch((function(e){return A(e)})),[2,i]}}))}))},e}();function kt(e,t){var r;return"string"==typeof e?r=e:(r=t(),"function"==typeof e&&(r=e(r))),r}function Bt(e,t,r,n){return function e(t,r,n,i,a){var s;"string"==typeof n&&(n=[n]);if(Array.isArray(n)){if(n.length>0){if(i.isConstant)s=i.defaultValue;else{var o=jt(r,n);o.propertyFound||(o=jt(t,n));var l=!1;o.propertyFound||(l=i.required||"options"===n[0]&&2===n.length),s=l?i.defaultValue:o.propertyValue}var u=Ue(n,i);a.serialize(i,s,u)}}else for(var p in i.required&&(s={}),n){var c=i.type.modelProperties[p],d=n[p],m=e(t,r,d,c,a),h=Ue(d,c);a.serialize(c,m,h),void 0!==m&&(s||(s={}),s[p]=m)}return s}(e,t,r.parameterPath,r.mapper,n)}function jt(e,t){for(var r={propertyFound:!1},n=0;n<t.length;++n){var i=t[n];if(!(null!=e&&i in e))break;e=e[i]}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}function Wt(e,t){var r,n=e.parsedHeaders,i=t&&t.bodyMapper,a=function(t){return Object.defineProperty(t,"_response",{value:e})};if(i){var s=i.type.name;if("Stream"===s)return a(M(M({},n),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody}));var o="Composite"===s&&i.type.modelProperties||{},l=Object.keys(o).some((function(e){return""===o[e].serializedName}));if("Sequence"===s||l){for(var u=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}(e.parsedBody||[]),p=0,c=Object.keys(o);p<c.length;p++){var d=c[p];o[d].serializedName&&(u[d]=e.parsedBody[d])}if(n)for(var m=0,h=Object.keys(n);m<h.length;m++){u[d=h[m]]=n[d]}return a(u),u}if("Composite"===s||"Dictionary"===s)return a(M(M({},n),e.parsedBody))}return i||"HEAD"===e.request.method||("object"!=typeof(r=e.parsedBody)&&"function"!=typeof r||null===r)?a(M(M({},n),{body:e.parsedBody})):a(M(M({},n),e.parsedBody))}var Kt={xmlName:"Handle",serializedName:"HandleItem",type:{name:"Composite",className:"HandleItem",modelProperties:{handleId:{xmlName:"HandleId",required:!0,serializedName:"HandleId",type:{name:"String"}},path:{xmlName:"Path",required:!0,serializedName:"Path",type:{name:"String"}},fileId:{xmlName:"FileId",required:!0,serializedName:"FileId",type:{name:"String"}},parentId:{xmlName:"ParentId",serializedName:"ParentId",type:{name:"String"}},sessionId:{xmlName:"SessionId",required:!0,serializedName:"SessionId",type:{name:"String"}},clientIp:{xmlName:"ClientIp",required:!0,serializedName:"ClientIp",type:{name:"String"}},openTime:{xmlName:"OpenTime",required:!0,serializedName:"OpenTime",type:{name:"DateTimeRfc1123"}},lastReconnectTime:{xmlName:"LastReconnectTime",serializedName:"LastReconnectTime",type:{name:"DateTimeRfc1123"}}}}},Vt={xmlName:"EnumerationResults",serializedName:"ListFilesAndDirectoriesSegmentResponse",type:{name:"Composite",className:"ListFilesAndDirectoriesSegmentResponse",modelProperties:{serviceEndpoint:{xmlIsAttribute:!0,xmlName:"ServiceEndpoint",required:!0,serializedName:"ServiceEndpoint",type:{name:"String"}},shareName:{xmlIsAttribute:!0,xmlName:"ShareName",required:!0,serializedName:"ShareName",type:{name:"String"}},shareSnapshot:{xmlIsAttribute:!0,xmlName:"ShareSnapshot",serializedName:"ShareSnapshot",type:{name:"String"}},directoryPath:{xmlIsAttribute:!0,xmlName:"DirectoryPath",required:!0,serializedName:"DirectoryPath",type:{name:"String"}},prefix:{xmlName:"Prefix",required:!0,serializedName:"Prefix",type:{name:"String"}},marker:{xmlName:"Marker",serializedName:"Marker",type:{name:"String"}},maxResults:{xmlName:"MaxResults",serializedName:"MaxResults",type:{name:"Number"}},segment:{xmlName:"Entries",required:!0,serializedName:"Segment",type:{name:"Composite",className:"FilesAndDirectoriesListSegment"}},continuationToken:{xmlName:"NextMarker",required:!0,serializedName:"NextMarker",type:{name:"String"}}}}},Xt={xmlName:"EnumerationResults",serializedName:"ListHandlesResponse",type:{name:"Composite",className:"ListHandlesResponse",modelProperties:{handleList:{xmlIsWrapped:!0,xmlName:"Entries",xmlElementName:"Handle",serializedName:"HandleList",type:{name:"Sequence",element:{type:{name:"Composite",className:"HandleItem"}}}},continuationToken:{xmlName:"NextMarker",required:!0,serializedName:"NextMarker",type:{name:"String"}}}}},Gt={xmlName:"EnumerationResults",serializedName:"ListSharesResponse",type:{name:"Composite",className:"ListSharesResponse",modelProperties:{serviceEndpoint:{xmlIsAttribute:!0,xmlName:"ServiceEndpoint",required:!0,serializedName:"ServiceEndpoint",type:{name:"String"}},prefix:{xmlName:"Prefix",serializedName:"Prefix",type:{name:"String"}},marker:{xmlName:"Marker",serializedName:"Marker",type:{name:"String"}},maxResults:{xmlName:"MaxResults",serializedName:"MaxResults",type:{name:"Number"}},shareItems:{xmlIsWrapped:!0,xmlName:"Shares",xmlElementName:"Share",serializedName:"ShareItems",type:{name:"Sequence",element:{type:{name:"Composite",className:"ShareItem"}}}},continuationToken:{xmlName:"NextMarker",required:!0,serializedName:"NextMarker",type:{name:"String"}}}}},Qt={serializedName:"StorageError",type:{name:"Composite",className:"StorageError",modelProperties:{message:{xmlName:"Message",serializedName:"Message",type:{name:"String"}}}}},$t={serializedName:"ShareStats",type:{name:"Composite",className:"ShareStats",modelProperties:{shareUsageBytes:{xmlName:"ShareUsageBytes",required:!0,serializedName:"ShareUsageBytes",type:{name:"Number"}}}}},Yt={serializedName:"Permission",type:{name:"Composite",className:"Permission",modelProperties:{permission:{xmlName:"Permission",required:!0,serializedName:"Permission",type:{name:"String"}}}}},Jt={xmlName:"StorageServiceProperties",serializedName:"FileServiceProperties",type:{name:"Composite",className:"FileServiceProperties",modelProperties:{hourMetrics:{xmlName:"HourMetrics",serializedName:"HourMetrics",type:{name:"Composite",className:"Metrics"}},minuteMetrics:{xmlName:"MinuteMetrics",serializedName:"MinuteMetrics",type:{name:"Composite",className:"Metrics"}},cors:{xmlIsWrapped:!0,xmlName:"Cors",xmlElementName:"CorsRule",serializedName:"Cors",type:{name:"Sequence",element:{type:{name:"Composite",className:"CorsRule"}}}}}}},Zt={serializedName:"service-setproperties-headers",type:{name:"Composite",className:"ServiceSetPropertiesHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},er={serializedName:"service-getproperties-headers",type:{name:"Composite",className:"ServiceGetPropertiesHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},tr={serializedName:"service-listsharessegment-headers",type:{name:"Composite",className:"ServiceListSharesSegmentHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},rr={serializedName:"share-create-headers",type:{name:"Composite",className:"ShareCreateHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},nr={serializedName:"share-getproperties-headers",type:{name:"Composite",className:"ShareGetPropertiesHeaders",modelProperties:{metadata:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},quota:{serializedName:"x-ms-share-quota",type:{name:"Number"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},ir={serializedName:"share-delete-headers",type:{name:"Composite",className:"ShareDeleteHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},ar={serializedName:"share-createsnapshot-headers",type:{name:"Composite",className:"ShareCreateSnapshotHeaders",modelProperties:{snapshot:{serializedName:"x-ms-snapshot",type:{name:"String"}},etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},sr={serializedName:"share-createpermission-headers",type:{name:"Composite",className:"ShareCreatePermissionHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},filePermissionKey:{serializedName:"x-ms-file-permission-key",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},or={serializedName:"share-getpermission-headers",type:{name:"Composite",className:"ShareGetPermissionHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},lr={serializedName:"share-setquota-headers",type:{name:"Composite",className:"ShareSetQuotaHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},ur={serializedName:"share-setmetadata-headers",type:{name:"Composite",className:"ShareSetMetadataHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},pr={serializedName:"share-getaccesspolicy-headers",type:{name:"Composite",className:"ShareGetAccessPolicyHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},cr={serializedName:"share-setaccesspolicy-headers",type:{name:"Composite",className:"ShareSetAccessPolicyHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},dr={serializedName:"share-getstatistics-headers",type:{name:"Composite",className:"ShareGetStatisticsHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},mr={serializedName:"directory-create-headers",type:{name:"Composite",className:"DirectoryCreateHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},filePermissionKey:{serializedName:"x-ms-file-permission-key",type:{name:"String"}},fileAttributes:{serializedName:"x-ms-file-attributes",type:{name:"String"}},fileCreatedOn:{serializedName:"x-ms-file-creation-time",type:{name:"DateTimeRfc1123"}},fileLastWriteOn:{serializedName:"x-ms-file-last-write-time",type:{name:"DateTimeRfc1123"}},fileChangeOn:{serializedName:"x-ms-file-change-time",type:{name:"DateTimeRfc1123"}},fileId:{serializedName:"x-ms-file-id",type:{name:"String"}},fileParentId:{serializedName:"x-ms-file-parent-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},hr={serializedName:"directory-getproperties-headers",type:{name:"Composite",className:"DirectoryGetPropertiesHeaders",modelProperties:{metadata:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-server-encrypted",type:{name:"Boolean"}},fileAttributes:{serializedName:"x-ms-file-attributes",type:{name:"String"}},fileCreatedOn:{serializedName:"x-ms-file-creation-time",type:{name:"DateTimeRfc1123"}},fileLastWriteOn:{serializedName:"x-ms-file-last-write-time",type:{name:"DateTimeRfc1123"}},fileChangeOn:{serializedName:"x-ms-file-change-time",type:{name:"DateTimeRfc1123"}},filePermissionKey:{serializedName:"x-ms-file-permission-key",type:{name:"String"}},fileId:{serializedName:"x-ms-file-id",type:{name:"String"}},fileParentId:{serializedName:"x-ms-file-parent-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},fr={serializedName:"directory-delete-headers",type:{name:"Composite",className:"DirectoryDeleteHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},yr={serializedName:"directory-setproperties-headers",type:{name:"Composite",className:"DirectorySetPropertiesHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},filePermissionKey:{serializedName:"x-ms-file-permission-key",type:{name:"String"}},fileAttributes:{serializedName:"x-ms-file-attributes",type:{name:"String"}},fileCreatedOn:{serializedName:"x-ms-file-creation-time",type:{name:"DateTimeRfc1123"}},fileLastWriteOn:{serializedName:"x-ms-file-last-write-time",type:{name:"DateTimeRfc1123"}},fileChangeOn:{serializedName:"x-ms-file-change-time",type:{name:"DateTimeRfc1123"}},fileId:{serializedName:"x-ms-file-id",type:{name:"String"}},fileParentId:{serializedName:"x-ms-file-parent-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},gr={serializedName:"directory-setmetadata-headers",type:{name:"Composite",className:"DirectorySetMetadataHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},vr={serializedName:"directory-listfilesanddirectoriessegment-headers",type:{name:"Composite",className:"DirectoryListFilesAndDirectoriesSegmentHeaders",modelProperties:{contentType:{serializedName:"content-type",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Nr={serializedName:"directory-listhandles-headers",type:{name:"Composite",className:"DirectoryListHandlesHeaders",modelProperties:{contentType:{serializedName:"content-type",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Sr={serializedName:"directory-forceclosehandles-headers",type:{name:"Composite",className:"DirectoryForceCloseHandlesHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},marker:{serializedName:"x-ms-marker",type:{name:"String"}},numberOfHandlesClosed:{serializedName:"x-ms-number-of-handles-closed",type:{name:"Number"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},br={serializedName:"file-create-headers",type:{name:"Composite",className:"FileCreateHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},filePermissionKey:{serializedName:"x-ms-file-permission-key",type:{name:"String"}},fileAttributes:{serializedName:"x-ms-file-attributes",type:{name:"String"}},fileCreatedOn:{serializedName:"x-ms-file-creation-time",type:{name:"DateTimeRfc1123"}},fileLastWriteOn:{serializedName:"x-ms-file-last-write-time",type:{name:"DateTimeRfc1123"}},fileChangeOn:{serializedName:"x-ms-file-change-time",type:{name:"DateTimeRfc1123"}},fileId:{serializedName:"x-ms-file-id",type:{name:"String"}},fileParentId:{serializedName:"x-ms-file-parent-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Pr={serializedName:"file-download-headers",type:{name:"Composite",className:"FileDownloadHeaders",modelProperties:{lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},metadata:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},contentLength:{serializedName:"content-length",type:{name:"Number"}},contentType:{serializedName:"content-type",type:{name:"String"}},contentRange:{serializedName:"content-range",type:{name:"String"}},etag:{serializedName:"etag",type:{name:"String"}},contentMD5:{serializedName:"content-md5",type:{name:"ByteArray"}},contentEncoding:{serializedName:"content-encoding",type:{name:"String"}},cacheControl:{serializedName:"cache-control",type:{name:"String"}},contentDisposition:{serializedName:"content-disposition",type:{name:"String"}},contentLanguage:{serializedName:"content-language",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},acceptRanges:{serializedName:"accept-ranges",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},copyCompletedOn:{serializedName:"x-ms-copy-completion-time",type:{name:"DateTimeRfc1123"}},copyStatusDescription:{serializedName:"x-ms-copy-status-description",type:{name:"String"}},copyId:{serializedName:"x-ms-copy-id",type:{name:"String"}},copyProgress:{serializedName:"x-ms-copy-progress",type:{name:"String"}},copySource:{serializedName:"x-ms-copy-source",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},fileContentMD5:{serializedName:"x-ms-content-md5",type:{name:"ByteArray"}},isServerEncrypted:{serializedName:"x-ms-server-encrypted",type:{name:"Boolean"}},fileAttributes:{serializedName:"x-ms-file-attributes",type:{name:"String"}},fileCreatedOn:{serializedName:"x-ms-file-creation-time",type:{name:"DateTimeRfc1123"}},fileLastWriteOn:{serializedName:"x-ms-file-last-write-time",type:{name:"DateTimeRfc1123"}},fileChangeOn:{serializedName:"x-ms-file-change-time",type:{name:"DateTimeRfc1123"}},filePermissionKey:{serializedName:"x-ms-file-permission-key",type:{name:"String"}},fileId:{serializedName:"x-ms-file-id",type:{name:"String"}},fileParentId:{serializedName:"x-ms-file-parent-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},xr={serializedName:"file-getproperties-headers",type:{name:"Composite",className:"FileGetPropertiesHeaders",modelProperties:{lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},metadata:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},fileType:{serializedName:"x-ms-type",type:{name:"String"}},contentLength:{serializedName:"content-length",type:{name:"Number"}},contentType:{serializedName:"content-type",type:{name:"String"}},etag:{serializedName:"etag",type:{name:"String"}},contentMD5:{serializedName:"content-md5",type:{name:"ByteArray"}},contentEncoding:{serializedName:"content-encoding",type:{name:"String"}},cacheControl:{serializedName:"cache-control",type:{name:"String"}},contentDisposition:{serializedName:"content-disposition",type:{name:"String"}},contentLanguage:{serializedName:"content-language",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},copyCompletedOn:{serializedName:"x-ms-copy-completion-time",type:{name:"DateTimeRfc1123"}},copyStatusDescription:{serializedName:"x-ms-copy-status-description",type:{name:"String"}},copyId:{serializedName:"x-ms-copy-id",type:{name:"String"}},copyProgress:{serializedName:"x-ms-copy-progress",type:{name:"String"}},copySource:{serializedName:"x-ms-copy-source",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},isServerEncrypted:{serializedName:"x-ms-server-encrypted",type:{name:"Boolean"}},fileAttributes:{serializedName:"x-ms-file-attributes",type:{name:"String"}},fileCreatedOn:{serializedName:"x-ms-file-creation-time",type:{name:"DateTimeRfc1123"}},fileLastWriteOn:{serializedName:"x-ms-file-last-write-time",type:{name:"DateTimeRfc1123"}},fileChangeOn:{serializedName:"x-ms-file-change-time",type:{name:"DateTimeRfc1123"}},filePermissionKey:{serializedName:"x-ms-file-permission-key",type:{name:"String"}},fileId:{serializedName:"x-ms-file-id",type:{name:"String"}},fileParentId:{serializedName:"x-ms-file-parent-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},wr={serializedName:"file-delete-headers",type:{name:"Composite",className:"FileDeleteHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Or={serializedName:"file-sethttpheaders-headers",type:{name:"Composite",className:"FileSetHTTPHeadersHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},filePermissionKey:{serializedName:"x-ms-file-permission-key",type:{name:"String"}},fileAttributes:{serializedName:"x-ms-file-attributes",type:{name:"String"}},fileCreatedOn:{serializedName:"x-ms-file-creation-time",type:{name:"DateTimeRfc1123"}},fileLastWriteOn:{serializedName:"x-ms-file-last-write-time",type:{name:"DateTimeRfc1123"}},fileChangeOn:{serializedName:"x-ms-file-change-time",type:{name:"DateTimeRfc1123"}},fileId:{serializedName:"x-ms-file-id",type:{name:"String"}},fileParentId:{serializedName:"x-ms-file-parent-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},zr={serializedName:"file-setmetadata-headers",type:{name:"Composite",className:"FileSetMetadataHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Rr={serializedName:"file-uploadrange-headers",type:{name:"Composite",className:"FileUploadRangeHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",type:{name:"ByteArray"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Cr={serializedName:"file-uploadrangefromurl-headers",type:{name:"Composite",className:"FileUploadRangeFromURLHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},xMsContentCrc64:{serializedName:"x-ms-content-crc64",type:{name:"ByteArray"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Er={serializedName:"file-getrangelist-headers",type:{name:"Composite",className:"FileGetRangeListHeaders",modelProperties:{lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},etag:{serializedName:"etag",type:{name:"String"}},fileContentLength:{serializedName:"x-ms-content-length",type:{name:"Number"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Tr={serializedName:"file-startcopy-headers",type:{name:"Composite",className:"FileStartCopyHeaders",modelProperties:{etag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},copyId:{serializedName:"x-ms-copy-id",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Mr={serializedName:"file-abortcopy-headers",type:{name:"Composite",className:"FileAbortCopyHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},qr={serializedName:"file-listhandles-headers",type:{name:"Composite",className:"FileListHandlesHeaders",modelProperties:{contentType:{serializedName:"content-type",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Dr={serializedName:"file-forceclosehandles-headers",type:{name:"Composite",className:"FileForceCloseHandlesHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},marker:{serializedName:"x-ms-marker",type:{name:"String"}},numberOfHandlesClosed:{serializedName:"x-ms-number-of-handles-closed",type:{name:"Number"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Ir=Object.freeze({__proto__:null,CorsRule:{serializedName:"CorsRule",type:{name:"Composite",className:"CorsRule",modelProperties:{allowedOrigins:{xmlName:"AllowedOrigins",required:!0,serializedName:"AllowedOrigins",type:{name:"String"}},allowedMethods:{xmlName:"AllowedMethods",required:!0,serializedName:"AllowedMethods",type:{name:"String"}},allowedHeaders:{xmlName:"AllowedHeaders",required:!0,serializedName:"AllowedHeaders",type:{name:"String"}},exposedHeaders:{xmlName:"ExposedHeaders",required:!0,serializedName:"ExposedHeaders",type:{name:"String"}},maxAgeInSeconds:{xmlName:"MaxAgeInSeconds",required:!0,serializedName:"MaxAgeInSeconds",constraints:{InclusiveMinimum:0},type:{name:"Number"}}}}},FileServiceProperties:Jt,ListSharesResponse:Gt,Metrics:{serializedName:"Metrics",type:{name:"Composite",className:"Metrics",modelProperties:{version:{xmlName:"Version",required:!0,serializedName:"Version",type:{name:"String"}},enabled:{xmlName:"Enabled",required:!0,serializedName:"Enabled",type:{name:"Boolean"}},includeAPIs:{xmlName:"IncludeAPIs",serializedName:"IncludeAPIs",type:{name:"Boolean"}},retentionPolicy:{xmlName:"RetentionPolicy",serializedName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy"}}}}},RetentionPolicy:{serializedName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy",modelProperties:{enabled:{xmlName:"Enabled",required:!0,serializedName:"Enabled",type:{name:"Boolean"}},days:{xmlName:"Days",serializedName:"Days",constraints:{InclusiveMaximum:365,InclusiveMinimum:1},type:{name:"Number"}}}}},ServiceGetPropertiesHeaders:er,ServiceListSharesSegmentHeaders:tr,ServiceSetPropertiesHeaders:Zt,ShareItem:{xmlName:"Share",serializedName:"ShareItem",type:{name:"Composite",className:"ShareItem",modelProperties:{name:{xmlName:"Name",required:!0,serializedName:"Name",type:{name:"String"}},snapshot:{xmlName:"Snapshot",serializedName:"Snapshot",type:{name:"String"}},properties:{xmlName:"Properties",required:!0,serializedName:"Properties",type:{name:"Composite",className:"ShareProperties"}},metadata:{xmlName:"Metadata",serializedName:"Metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ShareProperties:{serializedName:"ShareProperties",type:{name:"Composite",className:"ShareProperties",modelProperties:{lastModified:{xmlName:"Last-Modified",required:!0,serializedName:"Last-Modified",type:{name:"DateTimeRfc1123"}},etag:{xmlName:"Etag",required:!0,serializedName:"Etag",type:{name:"String"}},quota:{xmlName:"Quota",required:!0,serializedName:"Quota",type:{name:"Number"}}}}},StorageError:Qt}),Ar={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"properties",type:{name:"String"}}},_r={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"list",type:{name:"String"}}},Hr={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"filepermission",type:{name:"String"}}},Lr={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"metadata",type:{name:"String"}}},Ur={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"acl",type:{name:"String"}}},Fr={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"listhandles",type:{name:"String"}}},kr={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"forceclosehandles",type:{name:"String"}}},Br={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"range",type:{name:"String"}}},jr={parameterPath:"contentLength",mapper:{required:!0,serializedName:"Content-Length",type:{name:"Number"}}},Wr={parameterPath:"copySource",mapper:{required:!0,serializedName:"x-ms-copy-source",type:{name:"String"}}},Kr={parameterPath:"fileAttributes",mapper:{required:!0,serializedName:"x-ms-file-attributes",type:{name:"String"}}},Vr={parameterPath:["options","fileHttpHeaders","fileCacheControl"],mapper:{serializedName:"x-ms-cache-control",type:{name:"String"}}},Xr={parameterPath:["options","fileHttpHeaders","fileContentDisposition"],mapper:{serializedName:"x-ms-content-disposition",type:{name:"String"}}},Gr={parameterPath:["options","fileHttpHeaders","fileContentEncoding"],mapper:{serializedName:"x-ms-content-encoding",type:{name:"String"}}},Qr={parameterPath:["options","fileHttpHeaders","fileContentLanguage"],mapper:{serializedName:"x-ms-content-language",type:{name:"String"}}},$r={parameterPath:["options","fileHttpHeaders","fileContentMD5"],mapper:{serializedName:"x-ms-content-md5",type:{name:"ByteArray"}}},Yr={parameterPath:["options","fileHttpHeaders","fileContentType"],mapper:{serializedName:"x-ms-content-type",type:{name:"String"}}},Jr={parameterPath:"fileCreatedOn",mapper:{required:!0,serializedName:"x-ms-file-creation-time",type:{name:"String"}}},Zr={parameterPath:"fileLastWriteOn",mapper:{required:!0,serializedName:"x-ms-file-last-write-time",type:{name:"String"}}},en={parameterPath:["options","filePermission"],mapper:{serializedName:"x-ms-file-permission",type:{name:"String"}}},tn={parameterPath:["options","filePermissionKey"],mapper:{serializedName:"x-ms-file-permission-key",type:{name:"String"}}},rn={parameterPath:"handleId",mapper:{required:!0,serializedName:"x-ms-handle-id",type:{name:"String"}}},nn={parameterPath:["options","include"],mapper:{serializedName:"include",type:{name:"Sequence",element:{type:{name:"Enum",allowedValues:["snapshots","metadata"]}}}},collectionFormat:gt.Csv},an={parameterPath:["options","marker"],mapper:{serializedName:"marker",type:{name:"String"}}},sn={parameterPath:["options","maxResults"],mapper:{serializedName:"maxresults",constraints:{InclusiveMinimum:1},type:{name:"Number"}}},on={parameterPath:["options","metadata"],mapper:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"}},ln={parameterPath:["options","prefix"],mapper:{serializedName:"prefix",type:{name:"String"}}},un={parameterPath:["options","quota"],mapper:{serializedName:"x-ms-share-quota",constraints:{InclusiveMinimum:1},type:{name:"Number"}}},pn={parameterPath:["options","range"],mapper:{serializedName:"x-ms-range",type:{name:"String"}}},cn={parameterPath:"range",mapper:{required:!0,serializedName:"x-ms-range",type:{name:"String"}}},dn={parameterPath:["options","recursive"],mapper:{serializedName:"x-ms-recursive",type:{name:"Boolean"}}},mn={parameterPath:"restype",mapper:{required:!0,isConstant:!0,serializedName:"restype",defaultValue:"service",type:{name:"String"}}},hn={parameterPath:"restype",mapper:{required:!0,isConstant:!0,serializedName:"restype",defaultValue:"share",type:{name:"String"}}},fn={parameterPath:"restype",mapper:{required:!0,isConstant:!0,serializedName:"restype",defaultValue:"directory",type:{name:"String"}}},yn={parameterPath:["options","shareSnapshot"],mapper:{serializedName:"sharesnapshot",type:{name:"String"}}},gn={parameterPath:["options","timeoutInSeconds"],mapper:{serializedName:"timeout",constraints:{InclusiveMinimum:0},type:{name:"Number"}}},vn={parameterPath:"url",mapper:{required:!0,serializedName:"url",defaultValue:"",type:{name:"String"}},skipEncoding:!0},Nn={parameterPath:"version",mapper:{required:!0,serializedName:"x-ms-version",type:{name:"String"}}},Sn=function(){function e(e){this.client=e}return e.prototype.setProperties=function(e,t,r){return this.client.sendOperationRequest({properties:e,options:t},Pn,r)},e.prototype.getProperties=function(e,t){return this.client.sendOperationRequest({options:e},xn,t)},e.prototype.listSharesSegment=function(e,t){return this.client.sendOperationRequest({options:e},wn,t)},e}(),bn=new S(Ir,!0),Pn={httpMethod:"PUT",urlParameters:[vn],queryParameters:[gn,mn,Ar],headerParameters:[Nn],requestBody:{parameterPath:"properties",mapper:M(M({},Jt),{required:!0})},contentType:"application/xml; charset=utf-8",responses:{202:{headersMapper:Zt},default:{bodyMapper:Qt,headersMapper:Zt}},isXML:!0,serializer:bn},xn={httpMethod:"GET",urlParameters:[vn],queryParameters:[gn,mn,Ar],headerParameters:[Nn],responses:{200:{bodyMapper:Jt,headersMapper:er},default:{bodyMapper:Qt,headersMapper:er}},isXML:!0,serializer:bn},wn={httpMethod:"GET",urlParameters:[vn],queryParameters:[ln,an,sn,nn,gn,_r],headerParameters:[Nn],responses:{200:{bodyMapper:Gt,headersMapper:tr},default:{bodyMapper:Qt,headersMapper:tr}},isXML:!0,serializer:bn},On=Object.freeze({__proto__:null,AccessPolicy:{serializedName:"AccessPolicy",type:{name:"Composite",className:"AccessPolicy",modelProperties:{start:{xmlName:"Start",serializedName:"Start",type:{name:"String"}},expiry:{xmlName:"Expiry",serializedName:"Expiry",type:{name:"String"}},permissions:{xmlName:"Permission",serializedName:"Permission",type:{name:"String"}}}}},Permission:Yt,ShareCreateHeaders:rr,ShareCreatePermissionHeaders:sr,ShareCreateSnapshotHeaders:ar,ShareDeleteHeaders:ir,ShareGetAccessPolicyHeaders:pr,ShareGetPermissionHeaders:or,ShareGetPropertiesHeaders:nr,ShareGetStatisticsHeaders:dr,ShareSetAccessPolicyHeaders:cr,ShareSetMetadataHeaders:ur,ShareSetQuotaHeaders:lr,ShareStats:$t,SignedIdentifier:{serializedName:"SignedIdentifier",type:{name:"Composite",className:"SignedIdentifier",modelProperties:{id:{xmlName:"Id",required:!0,serializedName:"Id",type:{name:"String"}},accessPolicy:{xmlName:"AccessPolicy",serializedName:"AccessPolicy",type:{name:"Composite",className:"AccessPolicy"}}}}},StorageError:Qt}),zn=function(){function e(e){this.client=e}return e.prototype.create=function(e,t){return this.client.sendOperationRequest({options:e},Cn,t)},e.prototype.getProperties=function(e,t){return this.client.sendOperationRequest({options:e},En,t)},e.prototype.deleteMethod=function(e,t){return this.client.sendOperationRequest({options:e},Tn,t)},e.prototype.createSnapshot=function(e,t){return this.client.sendOperationRequest({options:e},Mn,t)},e.prototype.createPermission=function(e,t,r){return this.client.sendOperationRequest({permission:e,options:t},qn,r)},e.prototype.getPermission=function(e,t,r){return this.client.sendOperationRequest({filePermissionKey:e,options:t},Dn,r)},e.prototype.setQuota=function(e,t){return this.client.sendOperationRequest({options:e},In,t)},e.prototype.setMetadata=function(e,t){return this.client.sendOperationRequest({options:e},An,t)},e.prototype.getAccessPolicy=function(e,t){return this.client.sendOperationRequest({options:e},_n,t)},e.prototype.setAccessPolicy=function(e,t){return this.client.sendOperationRequest({options:e},Hn,t)},e.prototype.getStatistics=function(e,t){return this.client.sendOperationRequest({options:e},Ln,t)},e}(),Rn=new S(On,!0),Cn={httpMethod:"PUT",path:"{shareName}",urlParameters:[vn],queryParameters:[gn,hn],headerParameters:[on,un,Nn],responses:{201:{headersMapper:rr},default:{bodyMapper:Qt,headersMapper:rr}},isXML:!0,serializer:Rn},En={httpMethod:"GET",path:"{shareName}",urlParameters:[vn],queryParameters:[yn,gn,hn],headerParameters:[Nn],responses:{200:{headersMapper:nr},default:{bodyMapper:Qt,headersMapper:nr}},isXML:!0,serializer:Rn},Tn={httpMethod:"DELETE",path:"{shareName}",urlParameters:[vn],queryParameters:[yn,gn,hn],headerParameters:[Nn,{parameterPath:["options","deleteSnapshots"],mapper:{serializedName:"x-ms-delete-snapshots",type:{name:"Enum",allowedValues:["include"]}}}],responses:{202:{headersMapper:ir},default:{bodyMapper:Qt,headersMapper:ir}},isXML:!0,serializer:Rn},Mn={httpMethod:"PUT",path:"{shareName}",urlParameters:[vn],queryParameters:[gn,hn,{parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"snapshot",type:{name:"String"}}}],headerParameters:[on,Nn],responses:{201:{headersMapper:ar},default:{bodyMapper:Qt,headersMapper:ar}},isXML:!0,serializer:Rn},qn={httpMethod:"PUT",path:"{shareName}",urlParameters:[vn],queryParameters:[gn,hn,Hr],headerParameters:[Nn],requestBody:{parameterPath:"permission",mapper:M(M({},Yt),{required:!0})},contentType:"application/xml; charset=utf-8",responses:{201:{headersMapper:sr},default:{bodyMapper:Qt,headersMapper:sr}},isXML:!1,serializer:Rn},Dn={httpMethod:"GET",path:"{shareName}",urlParameters:[vn],queryParameters:[gn,hn,Hr],headerParameters:[{parameterPath:"filePermissionKey",mapper:{required:!0,serializedName:"x-ms-file-permission-key",type:{name:"String"}}},Nn],responses:{200:{bodyMapper:Yt,headersMapper:or},default:{bodyMapper:Qt,headersMapper:or}},isXML:!0,serializer:Rn},In={httpMethod:"PUT",path:"{shareName}",urlParameters:[vn],queryParameters:[gn,hn,Ar],headerParameters:[Nn,un],responses:{200:{headersMapper:lr},default:{bodyMapper:Qt,headersMapper:lr}},isXML:!0,serializer:Rn},An={httpMethod:"PUT",path:"{shareName}",urlParameters:[vn],queryParameters:[gn,hn,Lr],headerParameters:[on,Nn],responses:{200:{headersMapper:ur},default:{bodyMapper:Qt,headersMapper:ur}},isXML:!0,serializer:Rn},_n={httpMethod:"GET",path:"{shareName}",urlParameters:[vn],queryParameters:[gn,hn,Ur],headerParameters:[Nn],responses:{200:{bodyMapper:{xmlElementName:"SignedIdentifier",serializedName:"parsedResponse",type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}}},headersMapper:pr},default:{bodyMapper:Qt,headersMapper:pr}},isXML:!0,serializer:Rn},Hn={httpMethod:"PUT",path:"{shareName}",urlParameters:[vn],queryParameters:[gn,hn,Ur],headerParameters:[Nn],requestBody:{parameterPath:["options","shareAcl"],mapper:{xmlName:"SignedIdentifiers",xmlElementName:"SignedIdentifier",serializedName:"shareAcl",type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}}}},contentType:"application/xml; charset=utf-8",responses:{200:{headersMapper:cr},default:{bodyMapper:Qt,headersMapper:cr}},isXML:!0,serializer:Rn},Ln={httpMethod:"GET",path:"{shareName}",urlParameters:[vn],queryParameters:[gn,hn,{parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"stats",type:{name:"String"}}}],headerParameters:[Nn],responses:{200:{bodyMapper:$t,headersMapper:dr},default:{bodyMapper:Qt,headersMapper:dr}},isXML:!0,serializer:Rn},Un=Object.freeze({__proto__:null,DirectoryCreateHeaders:mr,DirectoryDeleteHeaders:fr,DirectoryForceCloseHandlesHeaders:Sr,DirectoryGetPropertiesHeaders:hr,DirectoryItem:{xmlName:"Directory",serializedName:"DirectoryItem",type:{name:"Composite",className:"DirectoryItem",modelProperties:{name:{xmlName:"Name",required:!0,serializedName:"Name",type:{name:"String"}}}}},DirectoryListFilesAndDirectoriesSegmentHeaders:vr,DirectoryListHandlesHeaders:Nr,DirectorySetMetadataHeaders:gr,DirectorySetPropertiesHeaders:yr,FileItem:{xmlName:"File",serializedName:"FileItem",type:{name:"Composite",className:"FileItem",modelProperties:{name:{xmlName:"Name",required:!0,serializedName:"Name",type:{name:"String"}},properties:{xmlName:"Properties",required:!0,serializedName:"Properties",type:{name:"Composite",className:"FileProperty"}}}}},FileProperty:{serializedName:"FileProperty",type:{name:"Composite",className:"FileProperty",modelProperties:{contentLength:{xmlName:"Content-Length",required:!0,serializedName:"Content-Length",type:{name:"Number"}}}}},FilesAndDirectoriesListSegment:{xmlName:"Entries",serializedName:"FilesAndDirectoriesListSegment",type:{name:"Composite",className:"FilesAndDirectoriesListSegment",modelProperties:{directoryItems:{xmlName:"DirectoryItems",xmlElementName:"Directory",required:!0,serializedName:"DirectoryItems",type:{name:"Sequence",element:{type:{name:"Composite",className:"DirectoryItem"}}}},fileItems:{xmlName:"FileItems",xmlElementName:"File",required:!0,serializedName:"FileItems",type:{name:"Sequence",element:{type:{name:"Composite",className:"FileItem"}}}}}}},HandleItem:Kt,ListFilesAndDirectoriesSegmentResponse:Vt,ListHandlesResponse:Xt,StorageError:Qt}),Fn=function(){function e(e){this.client=e}return e.prototype.create=function(e,t,r,n,i){return this.client.sendOperationRequest({fileAttributes:e,fileCreatedOn:t,fileLastWriteOn:r,options:n},Bn,i)},e.prototype.getProperties=function(e,t){return this.client.sendOperationRequest({options:e},jn,t)},e.prototype.deleteMethod=function(e,t){return this.client.sendOperationRequest({options:e},Wn,t)},e.prototype.setProperties=function(e,t,r,n,i){return this.client.sendOperationRequest({fileAttributes:e,fileCreatedOn:t,fileLastWriteOn:r,options:n},Kn,i)},e.prototype.setMetadata=function(e,t){return this.client.sendOperationRequest({options:e},Vn,t)},e.prototype.listFilesAndDirectoriesSegment=function(e,t){return this.client.sendOperationRequest({options:e},Xn,t)},e.prototype.listHandles=function(e,t){return this.client.sendOperationRequest({options:e},Gn,t)},e.prototype.forceCloseHandles=function(e,t,r){return this.client.sendOperationRequest({handleId:e,options:t},Qn,r)},e}(),kn=new S(Un,!0),Bn={httpMethod:"PUT",path:"{shareName}/{directory}",urlParameters:[vn],queryParameters:[gn,fn],headerParameters:[on,Nn,en,tn,Kr,Jr,Zr],responses:{201:{headersMapper:mr},default:{bodyMapper:Qt,headersMapper:mr}},isXML:!0,serializer:kn},jn={httpMethod:"GET",path:"{shareName}/{directory}",urlParameters:[vn],queryParameters:[yn,gn,fn],headerParameters:[Nn],responses:{200:{headersMapper:hr},default:{bodyMapper:Qt,headersMapper:hr}},isXML:!0,serializer:kn},Wn={httpMethod:"DELETE",path:"{shareName}/{directory}",urlParameters:[vn],queryParameters:[gn,fn],headerParameters:[Nn],responses:{202:{headersMapper:fr},default:{bodyMapper:Qt,headersMapper:fr}},isXML:!0,serializer:kn},Kn={httpMethod:"PUT",path:"{shareName}/{directory}",urlParameters:[vn],queryParameters:[gn,fn,Ar],headerParameters:[Nn,en,tn,Kr,Jr,Zr],responses:{200:{headersMapper:yr},default:{bodyMapper:Qt,headersMapper:yr}},isXML:!0,serializer:kn},Vn={httpMethod:"PUT",path:"{shareName}/{directory}",urlParameters:[vn],queryParameters:[gn,fn,Lr],headerParameters:[on,Nn],responses:{200:{headersMapper:gr},default:{bodyMapper:Qt,headersMapper:gr}},isXML:!0,serializer:kn},Xn={httpMethod:"GET",path:"{shareName}/{directory}",urlParameters:[vn],queryParameters:[ln,yn,an,sn,gn,fn,_r],headerParameters:[Nn],responses:{200:{bodyMapper:Vt,headersMapper:vr},default:{bodyMapper:Qt,headersMapper:vr}},isXML:!0,serializer:kn},Gn={httpMethod:"GET",path:"{shareName}/{directory}",urlParameters:[vn],queryParameters:[an,sn,gn,yn,Fr],headerParameters:[dn,Nn],responses:{200:{bodyMapper:Xt,headersMapper:Nr},default:{bodyMapper:Qt,headersMapper:Nr}},isXML:!0,serializer:kn},Qn={httpMethod:"PUT",path:"{shareName}/{directory}",urlParameters:[vn],queryParameters:[gn,an,yn,kr],headerParameters:[rn,dn,Nn],responses:{200:{headersMapper:Sr},default:{bodyMapper:Qt,headersMapper:Sr}},isXML:!0,serializer:kn},$n=Object.freeze({__proto__:null,FileAbortCopyHeaders:Mr,FileCreateHeaders:br,FileDeleteHeaders:wr,FileDownloadHeaders:Pr,FileForceCloseHandlesHeaders:Dr,FileGetPropertiesHeaders:xr,FileGetRangeListHeaders:Er,FileListHandlesHeaders:qr,FileSetHTTPHeadersHeaders:Or,FileSetMetadataHeaders:zr,FileStartCopyHeaders:Tr,FileUploadRangeFromURLHeaders:Cr,FileUploadRangeHeaders:Rr,HandleItem:Kt,ListHandlesResponse:Xt,Range:{serializedName:"Range",type:{name:"Composite",className:"Range",modelProperties:{start:{xmlName:"Start",required:!0,serializedName:"Start",type:{name:"Number"}},end:{xmlName:"End",required:!0,serializedName:"End",type:{name:"Number"}}}}},StorageError:Qt}),Yn=function(){function e(e){this.client=e}return e.prototype.create=function(e,t,r,n,i,a){return this.client.sendOperationRequest({fileContentLength:e,fileAttributes:t,fileCreatedOn:r,fileLastWriteOn:n,options:i},Zn,a)},e.prototype.download=function(e,t){return this.client.sendOperationRequest({options:e},ei,t)},e.prototype.getProperties=function(e,t){return this.client.sendOperationRequest({options:e},ti,t)},e.prototype.deleteMethod=function(e,t){return this.client.sendOperationRequest({options:e},ri,t)},e.prototype.setHTTPHeaders=function(e,t,r,n,i){return this.client.sendOperationRequest({fileAttributes:e,fileCreatedOn:t,fileLastWriteOn:r,options:n},ni,i)},e.prototype.setMetadata=function(e,t){return this.client.sendOperationRequest({options:e},ii,t)},e.prototype.uploadRange=function(e,t,r,n,i){return this.client.sendOperationRequest({range:e,fileRangeWrite:t,contentLength:r,options:n},ai,i)},e.prototype.uploadRangeFromURL=function(e,t,r,n,i,a){return this.client.sendOperationRequest({range:e,copySource:t,sourceRange:r,contentLength:n,options:i},si,a)},e.prototype.getRangeList=function(e,t){return this.client.sendOperationRequest({options:e},oi,t)},e.prototype.startCopy=function(e,t,r){return this.client.sendOperationRequest({copySource:e,options:t},li,r)},e.prototype.abortCopy=function(e,t,r){return this.client.sendOperationRequest({copyId:e,options:t},ui,r)},e.prototype.listHandles=function(e,t){return this.client.sendOperationRequest({options:e},pi,t)},e.prototype.forceCloseHandles=function(e,t,r){return this.client.sendOperationRequest({handleId:e,options:t},ci,r)},e}(),Jn=new S($n,!0),Zn={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[gn],headerParameters:[Nn,{parameterPath:"fileContentLength",mapper:{required:!0,serializedName:"x-ms-content-length",type:{name:"Number"}}},{parameterPath:"fileTypeConstant",mapper:{required:!0,isConstant:!0,serializedName:"x-ms-type",defaultValue:"file",type:{name:"String"}}},on,en,tn,Kr,Jr,Zr,Yr,Gr,Qr,Vr,$r,Xr],responses:{201:{headersMapper:br},default:{bodyMapper:Qt,headersMapper:br}},isXML:!0,serializer:Jn},ei={httpMethod:"GET",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[gn],headerParameters:[Nn,pn,{parameterPath:["options","rangeGetContentMD5"],mapper:{serializedName:"x-ms-range-get-content-md5",type:{name:"Boolean"}}}],responses:{200:{bodyMapper:{serializedName:"parsedResponse",type:{name:"Stream"}},headersMapper:Pr},206:{bodyMapper:{serializedName:"parsedResponse",type:{name:"Stream"}},headersMapper:Pr},default:{bodyMapper:Qt,headersMapper:Pr}},isXML:!0,serializer:Jn},ti={httpMethod:"HEAD",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[yn,gn],headerParameters:[Nn],responses:{200:{headersMapper:xr},default:{bodyMapper:Qt,headersMapper:xr}},isXML:!0,serializer:Jn},ri={httpMethod:"DELETE",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[gn],headerParameters:[Nn],responses:{202:{headersMapper:wr},default:{bodyMapper:Qt,headersMapper:wr}},isXML:!0,serializer:Jn},ni={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[gn,Ar],headerParameters:[Nn,{parameterPath:["options","fileContentLength"],mapper:{serializedName:"x-ms-content-length",type:{name:"Number"}}},en,tn,Kr,Jr,Zr,Yr,Gr,Qr,Vr,$r,Xr],responses:{200:{headersMapper:Or},default:{bodyMapper:Qt,headersMapper:Or}},isXML:!0,serializer:Jn},ii={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[gn,Lr],headerParameters:[on,Nn],responses:{200:{headersMapper:zr},default:{bodyMapper:Qt,headersMapper:zr}},isXML:!0,serializer:Jn},ai={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[gn,Br],headerParameters:[cn,{parameterPath:"fileRangeWrite",mapper:{required:!0,serializedName:"x-ms-write",defaultValue:"update",type:{name:"Enum",allowedValues:["update","clear"]}}},jr,{parameterPath:["options","contentMD5"],mapper:{serializedName:"Content-MD5",type:{name:"ByteArray"}}},Nn],requestBody:{parameterPath:["options","optionalbody"],mapper:{serializedName:"optionalbody",type:{name:"Stream"}}},contentType:"application/octet-stream",responses:{201:{headersMapper:Rr},default:{bodyMapper:Qt,headersMapper:Rr}},isXML:!0,serializer:Jn},si={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[gn,Br],headerParameters:[cn,Wr,{parameterPath:"sourceRange",mapper:{required:!0,serializedName:"x-ms-source-range",type:{name:"String"}}},{parameterPath:"fileRangeWriteFromUrl",mapper:{required:!0,isConstant:!0,serializedName:"x-ms-write",defaultValue:"update",type:{name:"String"}}},jr,{parameterPath:["options","sourceContentCrc64"],mapper:{serializedName:"x-ms-source-content-crc64",type:{name:"ByteArray"}}},Nn,{parameterPath:["options","sourceModifiedAccessConditions","sourceIfMatchCrc64"],mapper:{serializedName:"x-ms-source-if-match-crc64",type:{name:"ByteArray"}}},{parameterPath:["options","sourceModifiedAccessConditions","sourceIfNoneMatchCrc64"],mapper:{serializedName:"x-ms-source-if-none-match-crc64",type:{name:"ByteArray"}}}],responses:{201:{headersMapper:Cr},default:{bodyMapper:Qt,headersMapper:Cr}},isXML:!0,serializer:Jn},oi={httpMethod:"GET",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[yn,gn,{parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"rangelist",type:{name:"String"}}}],headerParameters:[Nn,pn],responses:{200:{bodyMapper:{xmlElementName:"Range",serializedName:"parsedResponse",type:{name:"Sequence",element:{type:{name:"Composite",className:"Range"}}}},headersMapper:Er},default:{bodyMapper:Qt,headersMapper:Er}},isXML:!0,serializer:Jn},li={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[gn],headerParameters:[Nn,on,Wr],responses:{202:{headersMapper:Tr},default:{bodyMapper:Qt,headersMapper:Tr}},isXML:!0,serializer:Jn},ui={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[{parameterPath:"copyId",mapper:{required:!0,serializedName:"copyid",type:{name:"String"}}},gn,{parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"copy",type:{name:"String"}}}],headerParameters:[{parameterPath:"copyActionAbortConstant",mapper:{required:!0,isConstant:!0,serializedName:"x-ms-copy-action",defaultValue:"abort",type:{name:"String"}}},Nn],responses:{204:{headersMapper:Mr},default:{bodyMapper:Qt,headersMapper:Mr}},isXML:!0,serializer:Jn},pi={httpMethod:"GET",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[an,sn,gn,yn,Fr],headerParameters:[Nn],responses:{200:{bodyMapper:Xt,headersMapper:qr},default:{bodyMapper:Qt,headersMapper:qr}},isXML:!0,serializer:Jn},ci={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[vn],queryParameters:[gn,an,yn,kr],headerParameters:[rn,Nn],responses:{200:{headersMapper:Dr},default:{bodyMapper:Qt,headersMapper:Dr}},isXML:!0,serializer:Jn},di=Ce("storage-file-share"),mi="2019-02-02",hi={FORCE_BROWSER_NO_CACHE:"_",SHARE_SNAPSHOT:"sharesnapshot",SIGNATURE:"sig",TIMEOUT:"timeout"},fi="content-length",yi="Cookie",gi=["Access-Control-Allow-Origin","Cache-Control","Content-Length","Content-Type","Date","Request-Id","traceparent","Transfer-Encoding","User-Agent","x-ms-client-request-id","x-ms-date","x-ms-error-code","x-ms-request-id","x-ms-return-client-request-id","x-ms-version","Accept-Ranges","Content-Disposition","Content-Encoding","Content-Language","Content-MD5","Content-Range","ETag","Last-Modified","Server","Vary","x-ms-content-crc64","x-ms-copy-action","x-ms-copy-completion-time","x-ms-copy-id","x-ms-copy-progress","x-ms-copy-status","x-ms-has-immutability-policy","x-ms-has-legal-hold","x-ms-lease-state","x-ms-lease-status","x-ms-range","x-ms-request-server-encrypted","x-ms-server-encrypted","x-ms-snapshot","x-ms-source-range","x-ms-cache-control","x-ms-content-disposition","x-ms-content-encoding","x-ms-content-language","x-ms-content-length","x-ms-content-md5","x-ms-content-type","x-ms-file-attributes","x-ms-file-change-time","x-ms-file-creation-time","x-ms-file-id","x-ms-file-last-write-time","x-ms-file-parent-id","x-ms-handle-id","x-ms-number-of-handles-closed","x-ms-recursive","x-ms-share-quota","x-ms-type","x-ms-write"],vi=["comp","maxresults","rscc","rscd","rsce","rscl","rsct","se","si","sip","sp","spr","sr","srt","ss","st","sv","copyid","restype"];function Ni(e){var t=Z.parse(e),r=t.getPath();return r=r||"/",r=encodeURIComponent(r).replace(/%2F/g,"/").replace(/'/g,"%27").replace(/\+/g,"%20").replace(/%25/g,"%"),t.setPath(r),t.toString()}function Si(e,t){for(var r=0,n=e.split(";");r<n.length;r++){var i=n[r];if(i.trim().startsWith(t))return i.trim().match(t+"=(.*)")[1]}return""}function bi(e){var t=Si(e,"FileEndpoint");if(t=t.endsWith("/")?t.slice(0,-1):t,-1!==e.search("DefaultEndpointsProtocol=")&&-1!==e.search("AccountKey=")){var r="",n="",i=Buffer.from("accountKey","base64"),a="";if(n=Si(e,"AccountName"),i=Buffer.from(Si(e,"AccountKey"),"base64"),!t){var s=(r=Si(e,"DefaultEndpointsProtocol")).toLowerCase();if("https"!==s&&"http"!==s)throw new Error("Invalid DefaultEndpointsProtocol in the provided Connection String. Expecting 'https' or 'http'");if(!(a=Si(e,"EndpointSuffix")))throw new Error("Invalid EndpointSuffix in the provided Connection String");t=r+"://"+n+".file."+a}if(!n)throw new Error("Invalid AccountName in the provided Connection String");if(0===i.length)throw new Error("Invalid AccountKey in the provided Connection String");return{kind:"AccountConnString",url:t,accountName:n,accountKey:i}}n=zi(t);var o=Si(e,"SharedAccessSignature");if(!t)throw new Error("Invalid FileEndpoint in the provided SAS Connection String");if(!o)throw new Error("Invalid SharedAccessSignature in the provided SAS Connection String");if(!n)throw new Error("Invalid AccountName in the provided SAS Connection String");return{kind:"SASConnString",url:t,accountName:n,accountSas:o}}function Pi(e,t){var r=Z.parse(e),n=r.getPath();return n=n?n.endsWith("/")?""+n+t:n+"/"+t:t,r.setPath(n),r.toString()}function xi(e,t,r){var n=Z.parse(e);return n.setQueryParameter(t,r),n.toString()}function wi(e,t){void 0===t&&(t=!0);var r=e.toISOString();return t?r.substring(0,r.length-1)+"0000Z":r.substring(0,r.length-5)+"Z"}function Oi(e,t,r){return q(this,void 0,void 0,(function(){return D(this,(function(n){return[2,new Promise((function(n,i){var a,s=function(){void 0!==a&&clearTimeout(a),i(r)};a=setTimeout((function(){void 0!==t&&t.removeEventListener("abort",s),n()}),e),void 0!==t&&t.addEventListener("abort",s)}))]}))}))}function zi(e){try{var t=(e=e.endsWith("/")?e.slice(0,-1):e).substring(e.lastIndexOf("://")+3,e.lastIndexOf(".file."));if(!t)throw new Error("Provided accountName is invalid.");return t}catch(e){throw new Error("Unable to extract accountName with provided information.")}}function Ri(e){try{var t=e.split("?")[0],r=(t=t.endsWith("/")?t.slice(0,-1):t).match("([^/]*)://([^/]*)/([^/]*)(/(.*))?"),n=decodeURIComponent(r[3]),i=decodeURIComponent(r[5]);if(n)return{shareName:n,filePathOrDirectoryPath:i};throw new Error("Provided shareName is invalid.")}catch(e){throw new Error("Unable to extract shareName and filePath/directoryPath with provided information.")}}var Ci,Ei=function(e){function t(t,r){return e.call(this,t,r)||this}return T(t,e),t.prototype.sendRequest=function(e){return q(this,void 0,void 0,(function(){return D(this,(function(t){return"GET"!==e.method.toUpperCase()&&"HEAD"!==e.method.toUpperCase()||(e.url=xi(e.url,hi.FORCE_BROWSER_NO_CACHE,(new Date).getTime().toString())),e.headers.remove(yi),e.headers.remove(fi),[2,this._nextPolicy.sendRequest(e)]}))}))},t}(le),Ti=function(){function e(){}return e.prototype.create=function(e,t){return new Ei(e,t)},e}();(Ci=e.StorageRetryPolicyType||(e.StorageRetryPolicyType={}))[Ci.EXPONENTIAL=0]="EXPONENTIAL",Ci[Ci.FIXED=1]="FIXED";var Mi={maxRetryDelayInMs:12e4,maxTries:4,retryDelayInMs:4e3,retryPolicyType:e.StorageRetryPolicyType.EXPONENTIAL,tryTimeoutInMs:void 0},qi=new V("The operation was aborted."),Di=function(t){function r(e,r,n){void 0===n&&(n=Mi);var i=t.call(this,e,r)||this;return i.retryOptions={retryPolicyType:n.retryPolicyType?n.retryPolicyType:Mi.retryPolicyType,maxTries:n.maxTries&&n.maxTries>=1?Math.floor(n.maxTries):Mi.maxTries,tryTimeoutInMs:n.tryTimeoutInMs&&n.tryTimeoutInMs>=0?n.tryTimeoutInMs:Mi.tryTimeoutInMs,retryDelayInMs:n.retryDelayInMs&&n.retryDelayInMs>=0?Math.min(n.retryDelayInMs,n.maxRetryDelayInMs?n.maxRetryDelayInMs:Mi.maxRetryDelayInMs):Mi.retryDelayInMs,maxRetryDelayInMs:n.maxRetryDelayInMs&&n.maxRetryDelayInMs>=0?n.maxRetryDelayInMs:Mi.maxRetryDelayInMs},i}return T(r,t),r.prototype.sendRequest=function(e){return q(this,void 0,void 0,(function(){return D(this,(function(t){return[2,this.attemptSendRequest(e,!1,1)]}))}))},r.prototype.attemptSendRequest=function(e,t,r){return q(this,void 0,void 0,(function(){var n,i,a,s;return D(this,(function(o){switch(o.label){case 0:n=e.clone(),i=!0,this.retryOptions.tryTimeoutInMs&&(n.url=xi(n.url,hi.TIMEOUT,Math.floor(this.retryOptions.tryTimeoutInMs/1e3).toString())),o.label=1;case 1:return o.trys.push([1,3,,4]),this.logf(K.INFO,"RetryPolicy: =====> Try="+r+" "+(i?"Primary":"Secondary")),[4,this._nextPolicy.sendRequest(n)];case 2:return a=o.sent(),this.shouldRetry(i,r,a)?(t=t||!i&&404===a.status,[3,4]):[2,a];case 3:if(s=o.sent(),this.logf(K.ERROR,"RetryPolicy: Caught error, message: "+s.message+", code: "+s.code),!this.shouldRetry(i,r,a,s))throw s;return[3,4];case 4:return[4,this.delay(i,r,e.abortSignal)];case 5:return o.sent(),[4,this.attemptSendRequest(e,t,++r)];case 6:return[2,o.sent()]}}))}))},r.prototype.shouldRetry=function(e,t,r,n){if(t>=this.retryOptions.maxTries)return this.logf(K.INFO,"RetryPolicy: Attempt(s) "+t+" >= maxTries "+this.retryOptions.maxTries+", no further try."),!1;if(n)for(var i=0,a=["ETIMEDOUT","ESOCKETTIMEDOUT","ECONNREFUSED","ECONNRESET","ENOENT","ENOTFOUND","TIMEOUT","REQUEST_SEND_ERROR"];i<a.length;i++){var s=a[i];if(n.name.toUpperCase().includes(s)||n.message.toUpperCase().includes(s)||n.code&&n.code.toString().toUpperCase().includes(s))return this.logf(K.INFO,"RetryPolicy: Network error "+s+" found, will retry."),!0}if(r||n){var o=r?r.status:n?n.statusCode:0;if(!e&&404===o)return this.logf(K.INFO,"RetryPolicy: Secondary access with 404, will retry."),!0;if(503===o||500===o)return this.logf(K.INFO,"RetryPolicy: Will retry for status code "+o+"."),!0}return!1},r.prototype.logf=function(e,t){},r.prototype.delay=function(t,r,n){return q(this,void 0,void 0,(function(){var i;return D(this,(function(a){if(i=0,t)switch(this.retryOptions.retryPolicyType){case e.StorageRetryPolicyType.EXPONENTIAL:i=Math.min((Math.pow(2,r-1)-1)*this.retryOptions.retryDelayInMs,this.retryOptions.maxRetryDelayInMs);break;case e.StorageRetryPolicyType.FIXED:i=this.retryOptions.retryDelayInMs}else i=1e3*Math.random();return this.logf(K.INFO,"RetryPolicy: Delay for "+i+"ms"),[2,Oi(i,n,qi)]}))}))},r}(le),Ii=function(){function e(e){this.retryOptions=e}return e.prototype.create=function(e,t){return new Di(e,t,this.retryOptions)},e}(),Ai=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i.telemetry=n,i}return T(t,e),t.prototype.sendRequest=function(e){return q(this,void 0,void 0,(function(){return D(this,(function(t){return[2,this._nextPolicy.sendRequest(e)]}))}))},t}(le),_i=function(){function e(e){this.telemetryString=[].join(" ")}return e.prototype.create=function(e,t){return new Ai(e,t,this.telemetryString)},e}(),Hi=function(){function e(e,t){void 0===t&&(t={}),this.factories=e,this.options=t}return e.prototype.toServiceClientOptions=function(){return{httpClient:this.options.httpClient,requestPolicyFactories:this.factories}},e}();function Li(e,t){void 0===t&&(t={});var r,n=[{create:function(e,t){return new Ut(e,t)}},(r=t.keepAliveOptions,{create:function(e,t){return new wt(e,t,r||xt)}}),new _i(t.userAgentOptions),at(),new Ti,Qe(),new Ii(t.retryOptions),_e({logger:di.info,allowedHeaderNames:gi,allowedQueryParameters:vi})];return n.push(e),new Hi(n,{httpClient:t.httpClient})}var Ui,Fi="azure-storage-file",ki="12.0.0-preview.6",Bi=function(e){function t(t,r,n){var i=this;if(null==t)throw new Error("'version' cannot be null.");if(null==r)throw new Error("'url' cannot be null.");if(n||(n={}),!n.userAgent){var a=ut();n.userAgent=Fi+"/"+ki+" "+a}return(i=e.call(this,void 0,n)||this).fileRangeWriteFromUrl="update",i.baseUri="{url}",i.requestContentType="application/json; charset=utf-8",i.version=t,i.url=r,i}return T(t,e),t}(Ft),ji=function(e,t){this.url=Ni(e),this.accountName=zi(e),this.pipeline=t,this.storageClientContext=new Bi(mi,this.url,t.toServiceClientOptions());var r=this.storageClientContext;r.requestContentType&&(r.requestContentType=void 0)},Wi=function(){function e(){this.readonly=!1,this.hidden=!1,this.system=!1,this.none=!1,this.directory=!1,this.archive=!1,this.temporary=!1,this.offline=!1,this.notContentIndexed=!1,this.noScrubData=!1}return e.parse=function(t){if(!t)throw new RangeError("Invalid fileAttributes: '"+t+"'.");for(var r=new e,n=0,i=t.trim().split("|");n<i.length;n++){var a=i[n];switch(a=a.trim()){case"ReadOnly":r.readonly=!0;break;case"Hidden":r.hidden=!0;break;case"System":r.system=!0;break;case"None":r.none=!0;break;case"Temporary":r.temporary=!0;break;case"Offline":r.offline=!0;break;case"Directory":r.directory=!0;break;case"Archive":r.archive=!0;break;case"NotContentIndexed":r.notContentIndexed=!0;break;case"NoScrubData":r.noScrubData=!0;break;default:throw new RangeError("Invalid attribute: "+a)}}return r},e.prototype.toString=function(){var e=[];return this.readonly&&e.push("ReadOnly"),this.hidden&&e.push("Hidden"),this.system&&e.push("System"),this.none&&e.push("None"),this.temporary&&e.push("Temporary"),this.directory&&e.push("Directory"),this.archive&&e.push("Archive"),this.offline&&e.push("Offline"),this.notContentIndexed&&e.push("NotContentIndexed"),this.noScrubData&&e.push("NoScrubData"),e.join("|")},e}();function Ki(e,t){if(e&&t)throw new RangeError("Only one of filePermission or filePermissionKey can be specified.")}function Vi(e){return e||(e={}),Ki(e.filePermission,e.filePermissionKey),e.creationTime||(e.creationTime="now"),e.lastWriteTime||(e.lastWriteTime="now"),e.filePermission||e.filePermissionKey||(e.filePermission="inherit"),e}function Xi(e){return e||(e={}),Ki(e.filePermission,e.filePermissionKey),e.creationTime||(e.creationTime="preserve"),e.lastWriteTime||(e.lastWriteTime="preserve"),e.fileAttributes||(e.fileAttributes="preserve"),e.filePermission||e.filePermissionKey||(e.filePermission="preserve"),e}function Gi(e){return e instanceof Wi?e.toString():e}function Qi(e){return e instanceof Date?wi(e):e}function $i(e){return e instanceof Date?wi(e):e}void 0!==typeof Symbol&&Symbol.asyncIterator||(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator")),(Ui=Object.freeze({__proto__:null}))&&Ui.default;var Yi,Ji=a((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}));(Yi=Ji)&&Yi.__esModule&&Object.prototype.hasOwnProperty.call(Yi,"default")&&Yi.default;function Zi(e){if(e.offset<0)throw new RangeError("Range.offset cannot be smaller than 0.");if(e.count&&e.count<=0)throw new RangeError("Range.count must be larger than 0. Leave it undefined if you want a range from offset to the end.");return e.count?"bytes="+e.offset+"-"+(e.offset+e.count-1):"bytes="+e.offset+"-"}var ea,ta=function(){function e(){}return e.prototype.create=function(e,t){throw new Error("Method should be implemented in children classes.")},e}(),ra="object"==typeof Reflect?Reflect:null,na=ra&&"function"==typeof ra.apply?ra.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};ea=ra&&"function"==typeof ra.ownKeys?ra.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var ia=Number.isNaN||function(e){return e!=e};function aa(){aa.init.call(this)}var sa=aa;aa.EventEmitter=aa,aa.prototype._events=void 0,aa.prototype._eventsCount=0,aa.prototype._maxListeners=void 0;var oa=10;function la(e){return void 0===e._maxListeners?aa.defaultMaxListeners:e._maxListeners}function ua(e,t,r,n){var i,a,s,o;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),void 0===s)s=a[t]=r,++e._eventsCount;else if("function"==typeof s?s=a[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=la(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,o=l,console&&console.warn&&console.warn(o)}return e}function pa(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,na(this.listener,this.target,e))}function ca(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=pa.bind(n);return i.listener=r,n.wrapFn=i,i}function da(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):ha(i,i.length)}function ma(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function ha(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(aa,"defaultMaxListeners",{enumerable:!0,get:function(){return oa},set:function(e){if("number"!=typeof e||e<0||ia(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");oa=e}}),aa.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},aa.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||ia(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},aa.prototype.getMaxListeners=function(){return la(this)},aa.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var o=i[e];if(void 0===o)return!1;if("function"==typeof o)na(o,this,t);else{var l=o.length,u=ha(o,l);for(r=0;r<l;++r)na(u[r],this,t)}return!0},aa.prototype.addListener=function(e,t){return ua(this,e,t,!1)},aa.prototype.on=aa.prototype.addListener,aa.prototype.prependListener=function(e,t){return ua(this,e,t,!0)},aa.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,ca(this,e,t)),this},aa.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,ca(this,e,t)),this},aa.prototype.removeListener=function(e,t){var r,n,i,a,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){s=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},aa.prototype.off=aa.prototype.removeListener,aa.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},aa.prototype.listeners=function(e){return da(this,e,!0)},aa.prototype.rawListeners=function(e){return da(this,e,!1)},aa.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ma.call(e,t)},aa.prototype.listenerCount=ma,aa.prototype.eventNames=function(){return this._eventsCount>0?ea(this._events):[]};var fa,ya=sa.EventEmitter;!function(e){e[e.Good=0]="Good",e[e.Error=1]="Error"}(fa||(fa={}));var ga=function(){function e(e){if(void 0===e&&(e=5),this.actives=0,this.completed=0,this.offset=0,this.operations=[],this.state=fa.Good,e<1)throw new RangeError("concurrency must be larger than 0");this.concurrency=e,this.emitter=new ya}return e.prototype.addOperation=function(e){var t=this;this.operations.push((function(){return q(t,void 0,void 0,(function(){var t;return D(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.actives++,[4,e()];case 1:return r.sent(),this.actives--,this.completed++,this.parallelExecute(),[3,3];case 2:return t=r.sent(),this.emitter.emit("error",t),[3,3];case 3:return[2]}}))}))}))},e.prototype.do=function(){return q(this,void 0,void 0,(function(){var e=this;return D(this,(function(t){return this.parallelExecute(),[2,new Promise((function(t,r){e.emitter.on("finish",t),e.emitter.on("error",(function(t){e.state=fa.Error,r(t)}))}))]}))}))},e.prototype.nextOperation=function(){return this.offset<this.operations.length?this.operations[this.offset++]:null},e.prototype.parallelExecute=function(){if(this.state!==fa.Error)if(this.completed>=this.operations.length)this.emitter.emit("finish");else for(;this.actives<this.concurrency;){var e=this.nextOperation();if(!e)return;e()}},e}(),va=function(){function e(e,t,r,n,i,a){if(this.emitter=new ya,this.offset=0,this.isStreamEnd=!1,this.isError=!1,this.executingOutgoingHandlers=0,this.numBuffers=0,this.unresolvedDataArray=[],this.unresolvedLength=0,this.incoming=[],this.outgoing=[],t<=0)throw new RangeError("bufferSize must be larger than 0, current is "+t);if(r<=0)throw new RangeError("maxBuffers must be larger than 0, current is "+r);if(i<=0)throw new RangeError("concurrency must be larger than 0, current is "+i);this.bufferSize=t,this.maxBuffers=r,this.readable=e,this.outgoingHandler=n,this.concurrency=i,this.encoding=a}return e.prototype.do=function(){return q(this,void 0,void 0,(function(){var e=this;return D(this,(function(t){return[2,new Promise((function(t,r){e.readable.on("data",(function(t){t="string"==typeof t?Buffer.from(t,e.encoding):t,e.appendUnresolvedData(t),e.resolveData()||e.readable.pause()})),e.readable.on("error",(function(t){e.emitter.emit("error",t)})),e.readable.on("end",(function(){e.isStreamEnd=!0,e.emitter.emit("checkEnd")})),e.emitter.on("error",(function(t){e.isError=!0,e.readable.pause(),r(t)})),e.emitter.on("checkEnd",(function(){if(e.outgoing.length>0)e.triggerOutgoingHandlers();else if(e.isStreamEnd&&0===e.executingOutgoingHandlers)if(e.unresolvedLength>0&&e.unresolvedLength<e.bufferSize)e.outgoingHandler(e.shiftBufferFromUnresolvedDataArray(),e.offset).then(t).catch(r);else{if(e.unresolvedLength>=e.bufferSize)return;t()}}))}))]}))}))},e.prototype.appendUnresolvedData=function(e){this.unresolvedDataArray.push(e),this.unresolvedLength+=e.length},e.prototype.shiftBufferFromUnresolvedDataArray=function(){if(this.unresolvedLength>=this.bufferSize){if(this.bufferSize===this.unresolvedDataArray[0].length)return this.unresolvedLength-=this.bufferSize,this.unresolvedDataArray.shift();var e=(t=Buffer.concat(this.unresolvedDataArray,this.unresolvedLength)).slice(0,this.bufferSize);return t=t.slice(this.bufferSize),this.unresolvedDataArray=[t],this.unresolvedLength-=e.length,e}if(this.unresolvedLength>0){var t=Buffer.concat(this.unresolvedDataArray,this.unresolvedLength);return this.unresolvedDataArray=[],this.unresolvedLength=0,t}return Buffer.allocUnsafe(0)},e.prototype.resolveData=function(){for(;this.unresolvedLength>=this.bufferSize;){var e=void 0;if(this.incoming.length>0)e=this.incoming.shift();else{if(!(this.numBuffers<this.maxBuffers))return!1;e=Buffer.allocUnsafe(this.bufferSize),this.numBuffers++}e.fill(this.shiftBufferFromUnresolvedDataArray()),this.outgoing.push(e),this.triggerOutgoingHandlers()}return!0},e.prototype.triggerOutgoingHandlers=function(){return q(this,void 0,void 0,(function(){var e;return D(this,(function(t){do{if(this.executingOutgoingHandlers>=this.concurrency)return[2];(e=this.outgoing.shift())&&this.triggerOutgoingHandler(e)}while(e);return[2]}))}))},e.prototype.triggerOutgoingHandler=function(e){return q(this,void 0,void 0,(function(){var t,r;return D(this,(function(n){switch(n.label){case 0:t=e.length,this.executingOutgoingHandlers++,this.offset+=t,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.outgoingHandler(e,this.offset-t)];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),this.emitter.emit("error",r),[2];case 4:return this.executingOutgoingHandlers--,this.reuseBuffer(e),this.emitter.emit("checkEnd"),[2]}}))}))},e.prototype.reuseBuffer=function(e){this.incoming.push(e),this.isError||!this.resolveData()||this.isStreamEnd||this.readable.resume()},e}();function Na(e,t,r,n,i){return q(this,void 0,void 0,(function(){var a,s;return D(this,(function(o){return a=0,s=n-r,[2,new Promise((function(n,o){e.on("readable",(function(){if(a>=s)n();else{var o=e.read();if(o){"string"==typeof o&&(o=Buffer.from(o,i));var l=a+o.length>s?s-a:o.length;t.fill(o.slice(0,l),r+a,r+a+l),a+=l}}})),e.on("end",(function(){a<s&&o(new Error("Stream drains before getting enough data needed. Data read: "+a+", data need: "+s)),n()})),e.on("error",o)}))]}))}))}function Sa(e,t){return q(this,void 0,void 0,(function(){return D(this,(function(t){return[2,new Promise((function(t,r){var n,i=void 0;process.env.STREAM_DEBUG&&(e.on("close",(function(){return console.log("rs.close")})),e.on("data",(function(){return console.log("rs.data")})),e.on("end",(function(){return console.log("rs.end")})),e.on("error",(function(){return console.log("rs.error")})),i.on("close",(function(){return console.log("ws.close")})),i.on("drain",(function(){return console.log("ws.drain")})),i.on("error",(function(){return console.log("ws.error")})),i.on("finish",(function(){return console.log("ws.finish")})),i.on("pipe",(function(){return console.log("ws.pipe")})),i.on("unpipe",(function(){return console.log("ws.unpipe")}))),e.on("error",(function(t){n||(n=t),e.emit("end")})),i.on("error",(function(e){n||(n=e)})),i.on("close",(function(){n?r(n):t()})),e.pipe(i)}))]}))}))}var ba=void 0,Pa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.sendRequest=function(e){return this._nextPolicy.sendRequest(this.signRequest(e))},t.prototype.signRequest=function(e){return e},t}(le),xa=function(e){function t(t,r){return e.call(this,t,r)||this}return T(t,e),t}(Pa),wa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.create=function(e,t){return new xa(e,t)},t}(ta);function Oa(e,t){void 0===t&&(t={});var r=Ht(),n=M(M({},t.spanOptions),{kind:Mt.CLIENT}),i=r.startSpan("Azure.Storage.File."+e,n);i.setAttribute("component","storage");var a=t.spanOptions||{};return i.isRecordingEvents()&&(a=M(M({},t),{parent:i})),{span:i,spanOptions:a}}var za=function(e){function t(t,r,n){var i,a,s=this;return a=r instanceof Hi?r:Li(r instanceof ta?r:new wa,n),i=Ri((s=e.call(this,t,a)||this).url),s._shareName=i.shareName,s._path=i.filePathOrDirectoryPath,s.context=new Yn(s.storageClientContext),s}return T(t,e),Object.defineProperty(t.prototype,"shareName",{get:function(){return this._shareName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a;return D(this,(function(s){r=Oa("ShareFileClient-create",t.tracingOptions),n=r.span,i=r.spanOptions;try{if(e<0||e>1099511627776)throw new RangeError("File size must >= 0 and < 1099511627776.");return(t=Vi(t)).fileAttributes||((a=new Wi).none=!0,t.fileAttributes=a),t.fileHttpHeaders=t.fileHttpHeaders||{},[2,this.context.create(e,Gi(t.fileAttributes),Qi(t.creationTime),$i(t.lastWriteTime),{abortSignal:t.abortSignal,fileHttpHeaders:t.fileHttpHeaders,metadata:t.metadata,filePermission:t.filePermission,filePermissionKey:t.filePermissionKey,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.download=function(e,t,r){return void 0===e&&(e=0),void 0===r&&(r={}),q(this,void 0,void 0,(function(){var n,i,a,s,o,l,u=this;return D(this,(function(p){switch(p.label){case 0:n=Oa("ShareFileClient-download",r.tracingOptions),i=n.span,a=n.spanOptions,p.label=1;case 1:if(p.trys.push([1,3,4,5]),r.rangeGetContentMD5&&0===e&&void 0===t)throw new RangeError("rangeGetContentMD5 only works with partial data downloading");return s=0===e&&!t,[4,this.context.download({abortSignal:r.abortSignal,onDownloadProgress:m?void 0:r.onProgress,range:s?void 0:Zi({offset:e,count:t}),rangeGetContentMD5:r.rangeGetContentMD5,spanOptions:a})];case 2:if(o=p.sent(),!m)return[2,o];if((void 0===r.maxRetryRequests||r.maxRetryRequests<0)&&(r.maxRetryRequests=5),void 0===o.contentLength)throw new RangeError("File download response doesn't contain valid content length header");return[2,new 1(o,(function(t){return q(u,void 0,void 0,(function(){var n;return D(this,(function(i){switch(i.label){case 0:return n={range:Zi({count:e+o.contentLength-t,offset:t})},[4,this.context.download(M(M({abortSignal:r.abortSignal},n),{spanOptions:a}))];case 1:return[2,i.sent().readableStreamBody]}}))}))}),e,o.contentLength,{abortSignal:r.abortSignal,maxRetryRequests:r.maxRetryRequests,onProgress:r.onProgress})];case 3:throw l=p.sent(),i.setStatus({code:Tt.UNKNOWN,message:l.message}),l;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.getProperties=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareFileClient-getProperties",e.tracingOptions),r=t.span,n=t.spanOptions;try{return[2,this.context.getProperties({abortSignal:e.abortSignal,spanOptions:n})]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.setProperties=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareFileClient-setProperties",e.tracingOptions),r=t.span,n=t.spanOptions;try{return(e=Xi(e)).fileHttpHeaders=e.fileHttpHeaders||{},[2,this.context.setHTTPHeaders(Gi(e.fileAttributes),Qi(e.creationTime),$i(e.lastWriteTime),{abortSignal:e.abortSignal,fileHttpHeaders:e.fileHttpHeaders,filePermission:e.filePermission,filePermissionKey:e.filePermissionKey,spanOptions:n})]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareFileClient-delete",e.tracingOptions),r=t.span,n=t.spanOptions;try{return[2,this.context.deleteMethod({abortSignal:e.abortSignal,spanOptions:n})]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.setHttpHeaders=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareFileClient-setHTTPHeaders",t.tracingOptions),n=r.span,i=r.spanOptions;try{return t=Xi(t),[2,this.context.setHTTPHeaders(Gi(t.fileAttributes),Qi(t.creationTime),$i(t.lastWriteTime),{abortSignal:t.abortSignal,fileHttpHeaders:e,filePermission:t.filePermission,filePermissionKey:t.filePermissionKey,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.resize=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareFileClient-resize",t.tracingOptions),n=r.span,i=r.spanOptions;try{if(e<0)throw new RangeError("Size cannot less than 0 when resizing file.");return t=Xi(t),[2,this.context.setHTTPHeaders(Gi(t.fileAttributes),Qi(t.creationTime),$i(t.lastWriteTime),{abortSignal:t.abortSignal,fileContentLength:e,filePermission:t.filePermission,filePermissionKey:t.filePermissionKey,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.setMetadata=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareFileClient-setMetadata",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.context.setMetadata({abortSignal:t.abortSignal,metadata:e,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.uploadRange=function(e,t,r,n){return void 0===n&&(n={}),q(this,void 0,void 0,(function(){var i,a,s;return D(this,(function(o){i=Oa("ShareFileClient-uploadRange",n.tracingOptions),a=i.span,s=i.spanOptions;try{if(t<0)throw new RangeError("offset must be >= 0");if(r<=0||r>4194304)throw new RangeError("contentLength must be > 0 and <= 4194304 bytes");if(r>4194304)throw new RangeError("offset must be < 4194304 bytes");return[2,this.context.uploadRange(Zi({count:r,offset:t}),"update",r,{abortSignal:n.abortSignal,contentMD5:n.contentMD5,onUploadProgress:n.onProgress,optionalbody:e,spanOptions:s})]}catch(e){throw a.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{a.end()}return[2]}))}))},t.prototype.uploadRangeFromURL=function(e,t,r,n,i){return void 0===i&&(i={}),q(this,void 0,void 0,(function(){var a,s,o;return D(this,(function(l){a=Oa("ShareFileClient-uploadRangeFromURL",i.tracingOptions),s=a.span,o=a.spanOptions;try{if(t<0||r<0)throw new RangeError("sourceOffset and destOffset must be >= 0");if(n<=0||n>4194304)throw new RangeError("count must be > 0 and <= 4194304 bytes");return[2,this.context.uploadRangeFromURL(Zi({offset:r,count:n}),e,Zi({offset:t,count:n}),0,M(M({abortSignal:i.abortSignal,sourceModifiedAccessConditions:i.sourceConditions},i),{spanOptions:o}))]}catch(e){throw s.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{s.end()}return[2]}))}))},t.prototype.clearRange=function(e,t,r){return void 0===r&&(r={}),q(this,void 0,void 0,(function(){var n,i,a;return D(this,(function(s){n=Oa("ShareFileClient-clearRange",r.tracingOptions),i=n.span,a=n.spanOptions;try{if(e<0||t<=0)throw new RangeError("offset must >= 0 and contentLength must be > 0");return[2,this.context.uploadRange(Zi({count:t,offset:e}),"clear",0,{abortSignal:r.abortSignal,spanOptions:a})]}catch(e){throw i.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{i.end()}return[2]}))}))},t.prototype.getRangeList=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n,i,a;return D(this,(function(s){switch(s.label){case 0:t=Oa("ShareFileClient-getRangeList",e.tracingOptions),r=t.span,n=t.spanOptions,s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.context.getRangeList({abortSignal:e.abortSignal,range:e.range?Zi(e.range):void 0,spanOptions:n})];case 2:return[2,{_response:(i=s.sent())._response,date:i.date,etag:i.etag,errorCode:i.errorCode,fileContentLength:i.fileContentLength,lastModified:i.lastModified,rangeList:i.filter((function(){return!0})),requestId:i.requestId,version:i.version}];case 3:throw a=s.sent(),r.setStatus({code:Tt.UNKNOWN,message:a.message}),a;case 4:return r.end(),[7];case 5:return[2]}}))}))},t.prototype.startCopyFromURL=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareFileClient-startCopyFromURL",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.context.startCopy(e,{abortSignal:t.abortSignal,metadata:t.metadata,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.abortCopyFromURL=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareFileClient-abortCopyFromURL",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.context.abortCopy(e,{abortSignal:t.abortSignal,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.uploadBrowserData=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a;return D(this,(function(s){r=Oa("ShareFileClient-uploadBrowserData",t.tracingOptions),n=r.span,i=r.spanOptions;try{return a=new Blob([e]),[2,this.uploadSeekableBlob((function(e,t){return a.slice(e,e+t)}),a.size,M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.uploadSeekableBlob=function(e,t,r){return void 0===r&&(r={}),q(this,void 0,void 0,(function(){var n,i,a,s,o,l,u,p,c,d=this;return D(this,(function(m){switch(m.label){case 0:n=Oa("ShareFileClient-UploadSeekableBlob",r.tracingOptions),i=n.span,a=n.spanOptions,m.label=1;case 1:if(m.trys.push([1,3,4,5]),r.rangeSize||(r.rangeSize=4194304),r.rangeSize<0||r.rangeSize>4194304)throw new RangeError("options.rangeSize must be > 0 and <= 4194304");if(r.fileHttpHeaders||(r.fileHttpHeaders={}),r.concurrency||(r.concurrency=5),r.concurrency<0)throw new RangeError("options.concurrency cannot less than 0.");return[4,this.create(t,{abortSignal:r.abortSignal,fileHttpHeaders:r.fileHttpHeaders,metadata:r.metadata,tracingOptions:M(M({},r.tracingOptions),{spanOptions:a})})];case 2:for(m.sent(),s=Math.floor((t-1)/r.rangeSize)+1,o=0,l=new ga(r.concurrency),u=function(n){l.addOperation((function(){return q(d,void 0,void 0,(function(){var i,l,u;return D(this,(function(p){switch(p.label){case 0:return i=r.rangeSize*n,l=n===s-1?t:i+r.rangeSize,u=l-i,[4,this.uploadRange(e(i,u),i,u,{abortSignal:r.abortSignal,tracingOptions:M(M({},r.tracingOptions),{spanOptions:a})})];case 1:return p.sent(),o+=u,r.onProgress&&r.onProgress({loadedBytes:o}),[2]}}))}))}))},p=0;p<s;p++)u(p);return[2,l.do()];case 3:throw c=m.sent(),i.setStatus({code:Tt.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.uploadFile=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a,s;return D(this,(function(o){switch(o.label){case 0:r=Oa("ShareFileClient-uploadFile",t.tracingOptions),n=r.span,i=r.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,ba(e)];case 2:return a=o.sent().size,[2,this.uploadResetableStream((function(e,t){}),a,M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))];case 3:throw s=o.sent(),n.setStatus({code:Tt.UNKNOWN,message:s.message}),s;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.uploadResetableStream=function(e,t,r){return void 0===r&&(r={}),q(this,void 0,void 0,(function(){var n,i,a,s,o,l,u,p,c,d=this;return D(this,(function(m){switch(m.label){case 0:n=Oa("ShareFileClient-uploadResetableStream",r.tracingOptions),i=n.span,a=n.spanOptions,m.label=1;case 1:if(m.trys.push([1,3,4,5]),r.rangeSize||(r.rangeSize=4194304),r.rangeSize<0||r.rangeSize>4194304)throw new RangeError("options.rangeSize must be > 0 and <= 4194304");if(r.fileHttpHeaders||(r.fileHttpHeaders={}),r.concurrency||(r.concurrency=5),r.concurrency<0)throw new RangeError("options.concurrency cannot less than 0.");return[4,this.create(t,{abortSignal:r.abortSignal,fileHttpHeaders:r.fileHttpHeaders,metadata:r.metadata,tracingOptions:M(M({},r.tracingOptions),{spanOptions:a})})];case 2:for(m.sent(),s=Math.floor((t-1)/r.rangeSize)+1,o=0,l=new ga(r.concurrency),u=function(n){l.addOperation((function(){return q(d,void 0,void 0,(function(){var i,l,u;return D(this,(function(p){switch(p.label){case 0:return i=r.rangeSize*n,l=n===s-1?t:i+r.rangeSize,u=l-i,[4,this.uploadRange((function(){return e(i,u)}),i,u,{abortSignal:r.abortSignal,tracingOptions:M(M({},r.tracingOptions),{spanOptions:a})})];case 1:return p.sent(),o+=u,r.onProgress&&r.onProgress({loadedBytes:o}),[2]}}))}))}))},p=0;p<s;p++)u(p);return[2,l.do()];case 3:throw c=m.sent(),i.setStatus({code:Tt.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.downloadToBuffer=function(e,t,r,n){return void 0===t&&(t=0),void 0===n&&(n={}),q(this,void 0,void 0,(function(){var i,a,s,o,l,u,p,c,d,m=this;return D(this,(function(h){switch(h.label){case 0:i=Oa("ShareFileClient-downloadToBuffer",n.tracingOptions),a=i.span,s=i.spanOptions,h.label=1;case 1:if(h.trys.push([1,5,6,7]),n.rangeSize||(n.rangeSize=4194304),n.rangeSize<0)throw new RangeError("rangeSize option must be > 0");if(t<0)throw new RangeError("offset option must be >= 0");if(r&&r<=0)throw new RangeError("count option must be > 0");if(n.concurrency||(n.concurrency=5),n.concurrency<0)throw new RangeError("options.concurrency cannot less than 0.");return r?[3,3]:[4,this.getProperties({abortSignal:n.abortSignal,tracingOptions:M(M({},n.tracingOptions),{spanOptions:s})})];case 2:if(o=h.sent(),(r=o.contentLength-t)<0)throw new RangeError("offset "+t+" shouldn't be larger than file size "+o.contentLength);h.label=3;case 3:if(e.length<r)throw new RangeError("The buffer's size should be equal to or larger than the request count of bytes: "+r);for(l=0,u=new ga(n.concurrency),p=function(i){u.addOperation((function(){return q(m,void 0,void 0,(function(){var a,o;return D(this,(function(u){switch(u.label){case 0:return a=t+r,i+n.rangeSize<a&&(a=i+n.rangeSize),[4,this.download(i,a-i,{abortSignal:n.abortSignal,maxRetryRequests:n.maxRetryRequestsPerRange,tracingOptions:M(M({},n.tracingOptions),{spanOptions:s})})];case 1:return o=u.sent(),[4,Na(o.readableStreamBody,e,i-t,a-t)];case 2:return u.sent(),l+=a-i,n.onProgress&&n.onProgress({loadedBytes:l}),[2]}}))}))}))},c=t;c<t+r;c+=n.rangeSize)p(c);return[4,u.do()];case 4:return h.sent(),[3,7];case 5:throw d=h.sent(),a.setStatus({code:Tt.UNKNOWN,message:d.message}),d;case 6:return a.end(),[7];case 7:return[2]}}))}))},t.prototype.uploadStream=function(e,t,r,n,i){return void 0===i&&(i={}),q(this,void 0,void 0,(function(){var a,s,o,l,u,p=this;return D(this,(function(c){switch(c.label){case 0:a=Oa("ShareFileClient-uploadStream",i.tracingOptions),s=a.span,o=a.spanOptions,c.label=1;case 1:if(c.trys.push([1,3,4,5]),i.fileHttpHeaders||(i.fileHttpHeaders={}),r<=0||r>4194304)throw new RangeError("bufferSize must be > 0 and <= 4194304");if(n<0)throw new RangeError("maxBuffers must be > 0.");return[4,this.create(t,{abortSignal:i.abortSignal,fileHttpHeaders:i.fileHttpHeaders,metadata:i.metadata,tracingOptions:M(M({},i.tracingOptions),{spanOptions:o})})];case 2:return c.sent(),l=0,[2,new va(e,r,n,(function(e,r){return q(p,void 0,void 0,(function(){return D(this,(function(n){switch(n.label){case 0:if(l+e.length>t)throw new RangeError("Stream size is larger than file size "+t+" bytes, uploading failed. Please make sure stream length is less or equal than file size.");return[4,this.uploadRange(e,r,e.length,{abortSignal:i.abortSignal,tracingOptions:M(M({},i.tracingOptions),{spanOptions:o})})];case 1:return n.sent(),l+=e.length,i.onProgress&&i.onProgress({loadedBytes:l}),[2]}}))}))}),Math.ceil(n/4*3)).do()];case 3:throw u=c.sent(),s.setStatus({code:Tt.UNKNOWN,message:u.message}),u;case 4:return s.end(),[7];case 5:return[2]}}))}))},t.prototype.downloadToFile=function(e,t,r,n){return void 0===t&&(t=0),void 0===n&&(n={}),q(this,void 0,void 0,(function(){var e,i,a,s,o;return D(this,(function(l){switch(l.label){case 0:e=Oa("ShareFileClient-downloadToFile",n.tracingOptions),i=e.span,a=e.spanOptions,l.label=1;case 1:return l.trys.push([1,5,6,7]),[4,this.download(t,r,M(M({},n),{tracingOptions:M(M({},n.tracingOptions),{spanOptions:a})}))];case 2:return(s=l.sent()).readableStreamBody?[4,Sa(s.readableStreamBody)]:[3,4];case 3:l.sent(),l.label=4;case 4:return s.fileDownloadStream=void 0,[2,s];case 5:throw o=l.sent(),i.setStatus({code:Tt.UNKNOWN,message:o.message}),o;case 6:return i.end(),[7];case 7:return[2]}}))}))},t.prototype.listHandlesSegment=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a,s;return D(this,(function(o){switch(o.label){case 0:r=Oa("ShareFileClient-listHandlesSegment",t.tracingOptions),n=r.span,i=r.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),e=""===e?void 0:e,[4,this.context.listHandles(M(M({abortSignal:t.abortSignal,marker:e},t),{spanOptions:i}))];case 2:return""===(a=o.sent()).handleList&&(a.handleList=void 0),[2,a];case 3:throw s=o.sent(),n.setStatus({code:Tt.UNKNOWN,message:s.message}),s;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.iterateHandleSegments=function(e,t){return void 0===t&&(t={}),L(this,arguments,(function(){var r;return D(this,(function(n){switch(n.label){case 0:if(!e&&void 0!==e)return[3,6];n.label=1;case 1:return[4,H(this.listHandlesSegment(e,t))];case 2:return r=n.sent(),e=r.continuationToken,[4,H(r)];case 3:return[4,n.sent()];case 4:n.sent(),n.label=5;case 5:if(e)return[3,1];n.label=6;case 6:return[2]}}))}))},t.prototype.listHandleItems=function(e){return void 0===e&&(e={}),L(this,arguments,(function(){var t,r,n,i,a,s,o,l;return D(this,(function(u){switch(u.label){case 0:u.trys.push([0,9,10,15]),t=F(this.iterateHandleSegments(void 0,e)),u.label=1;case 1:return[4,H(t.next())];case 2:if((r=u.sent()).done)return[3,8];if(!(n=r.value).handleList)return[3,7];i=0,a=n.handleList,u.label=3;case 3:return i<a.length?[4,H(a[i])]:[3,7];case 4:return[4,u.sent()];case 5:u.sent(),u.label=6;case 6:return i++,[3,3];case 7:return[3,1];case 8:return[3,15];case 9:return s=u.sent(),o={error:s},[3,15];case 10:return u.trys.push([10,,13,14]),r&&!r.done&&(l=t.return)?[4,H(l.call(t))]:[3,12];case 11:u.sent(),u.label=12;case 12:return[3,14];case 13:if(o)throw o.error;return[7];case 14:return[7];case 15:return[2]}}))}))},t.prototype.listHandles=function(e){var t,r=this;void 0===e&&(e={});var n=this.listHandleItems(e);return(t={next:function(){return q(this,void 0,void 0,(function(){return D(this,(function(e){return[2,n.next()]}))}))}})[Symbol.asyncIterator]=function(){return this},t.byPage=function(t){return void 0===t&&(t={}),r.iterateHandleSegments(t.continuationToken,M({maxPageSize:t.maxPageSize},e))},t},t.prototype.forceCloseHandlesSegment=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareFileClient-forceCloseHandlesSegment",t.tracingOptions),n=r.span,i=r.spanOptions;try{return e=""===e?void 0:e,[2,this.context.forceCloseHandles("*",{abortSignal:t.abortSignal,marker:e,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.forceCloseAllHandles=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n,i,a,s,o;return D(this,(function(l){switch(l.label){case 0:t=Oa("ShareFileClient-forceCloseAllHandles",e.tracingOptions),r=t.span,n=t.spanOptions,l.label=1;case 1:l.trys.push([1,6,7,8]),i=0,a="",l.label=2;case 2:return[4,this.forceCloseHandlesSegment(a,{tracingOptions:M(M({},e.tracingOptions),{spanOptions:n})})];case 3:s=l.sent(),a=s.marker,s.numberOfHandlesClosed&&(i+=s.numberOfHandlesClosed),l.label=4;case 4:if(a)return[3,2];l.label=5;case 5:return[2,i];case 6:throw o=l.sent(),r.setStatus({code:Tt.UNKNOWN,message:o.message}),o;case 7:return r.end(),[7];case 8:return[2]}}))}))},t.prototype.forceCloseHandle=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareFileClient-forceCloseHandle",t.tracingOptions),n=r.span,i=r.spanOptions;try{if("*"===e)throw new RangeError("Parameter handleID should be a specified handle ID. Use forceCloseHandlesSegment() to close all handles.");return[2,this.context.forceCloseHandles(e,{abortSignal:t.abortSignal,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t}(ji),Ra=function(e){function t(t,r,n){var i;void 0===n&&(n={});var a,s=this;return a=r instanceof Hi?r:Li(r instanceof ta?r:new wa,n),i=Ri((s=e.call(this,t,a)||this).url),s._shareName=i.shareName,s._path=i.filePathOrDirectoryPath,s.context=new Fn(s.storageClientContext),s}return T(t,e),Object.defineProperty(t.prototype,"shareName",{get:function(){return this._shareName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),t.prototype.create=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n,i;return D(this,(function(a){t=Oa("ShareDirectoryClient-create",e.tracingOptions),r=t.span,n=t.spanOptions;try{return e.fileAttributes||(e=Vi(e),(i=new Wi).directory=!0,e.fileAttributes=i),[2,this.context.create(Gi(e.fileAttributes),Qi(e.creationTime),$i(e.lastWriteTime),{abortSignal:e.abortSignal,metadata:e.metadata,filePermission:e.filePermission,filePermissionKey:e.filePermissionKey,spanOptions:n})]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.setProperties=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareDirectoryClient-setProperties",e.tracingOptions),r=t.span,n=t.spanOptions;try{return e=Xi(e),[2,this.context.setProperties(Gi(e.fileAttributes),Qi(e.creationTime),$i(e.lastWriteTime),{abortSignal:e.abortSignal,filePermission:e.filePermission,filePermissionKey:e.filePermissionKey,spanOptions:n})]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.getDirectoryClient=function(e){return new t(Pi(this.url,encodeURIComponent(e)),this.pipeline)},t.prototype.createSubdirectory=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a,s,o;return D(this,(function(l){switch(l.label){case 0:r=Oa("ShareDirectoryClient-createSubdirectory",t.tracingOptions),n=r.span,i=r.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,(a=this.getDirectoryClient(e)).create(M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))];case 2:return s=l.sent(),[2,{directoryClient:a,directoryCreateResponse:s}];case 3:throw o=l.sent(),n.setStatus({code:Tt.UNKNOWN,message:o.message}),o;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.deleteSubdirectory=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a;return D(this,(function(s){switch(s.label){case 0:r=Oa("ShareDirectoryClient-deleteSubdirectory",t.tracingOptions),n=r.span,i=r.spanOptions,s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.getDirectoryClient(e).delete(M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))];case 2:return[2,s.sent()];case 3:throw a=s.sent(),n.setStatus({code:Tt.UNKNOWN,message:a.message}),a;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.createFile=function(e,t,r){return void 0===r&&(r={}),q(this,void 0,void 0,(function(){var n,i,a,s,o,l;return D(this,(function(u){switch(u.label){case 0:n=Oa("ShareDirectoryClient-createFile",r.tracingOptions),i=n.span,a=n.spanOptions,u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,(s=this.getFileClient(e)).create(t,M(M({},r),{tracingOptions:M(M({},r.tracingOptions),{spanOptions:a})}))];case 2:return o=u.sent(),[2,{fileClient:s,fileCreateResponse:o}];case 3:throw l=u.sent(),i.setStatus({code:Tt.UNKNOWN,message:l.message}),l;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.deleteFile=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a;return D(this,(function(s){switch(s.label){case 0:r=Oa("ShareDirectoryClient-deleteFile",t.tracingOptions),n=r.span,i=r.spanOptions,s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.getFileClient(e).delete(M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))];case 2:return[2,s.sent()];case 3:throw a=s.sent(),n.setStatus({code:Tt.UNKNOWN,message:a.message}),a;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.getFileClient=function(e){return new za(Pi(this.url,encodeURIComponent(e)),this.pipeline)},t.prototype.getProperties=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareDirectoryClient-getProperties",e.tracingOptions),r=t.span,n=t.spanOptions;try{return[2,this.context.getProperties({abortSignal:e.abortSignal,spanOptions:n})]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareDirectoryClient-delete",e.tracingOptions),r=t.span,n=t.spanOptions;try{return[2,this.context.deleteMethod({abortSignal:e.abortSignal,spanOptions:n})]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.setMetadata=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareDirectoryClient-setMetadata",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.context.setMetadata({abortSignal:t.abortSignal,metadata:e,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.iterateFilesAndDirectoriesSegments=function(e,t){return void 0===t&&(t={}),L(this,arguments,(function(){var r;return D(this,(function(n){switch(n.label){case 0:return[4,H(this.listFilesAndDirectoriesSegment(e,t))];case 1:return r=n.sent(),e=r.continuationToken,[4,H(r)];case 2:return[4,H.apply(void 0,[n.sent()])];case 3:return[4,n.sent()];case 4:n.sent(),n.label=5;case 5:if(e)return[3,0];n.label=6;case 6:return[2]}}))}))},t.prototype.listFilesAndDirectoriesItems=function(e){return void 0===e&&(e={}),L(this,arguments,(function(){var t,r,n,i,a,s,o,l,u,p,c,d;return D(this,(function(m){switch(m.label){case 0:m.trys.push([0,14,15,20]),t=F(this.iterateFilesAndDirectoriesSegments(void 0,e)),m.label=1;case 1:return[4,H(t.next())];case 2:if((r=m.sent()).done)return[3,13];n=r.value,i=0,a=n.segment.fileItems,m.label=3;case 3:return i<a.length?(s=a[i],[4,H(M({kind:"file"},s))]):[3,7];case 4:return[4,m.sent()];case 5:m.sent(),m.label=6;case 6:return i++,[3,3];case 7:o=0,l=n.segment.directoryItems,m.label=8;case 8:return o<l.length?(u=l[o],[4,H(M({kind:"directory"},u))]):[3,12];case 9:return[4,m.sent()];case 10:m.sent(),m.label=11;case 11:return o++,[3,8];case 12:return[3,1];case 13:return[3,20];case 14:return p=m.sent(),c={error:p},[3,20];case 15:return m.trys.push([15,,18,19]),r&&!r.done&&(d=t.return)?[4,H(d.call(t))]:[3,17];case 16:m.sent(),m.label=17;case 17:return[3,19];case 18:if(c)throw c.error;return[7];case 19:return[7];case 20:return[2]}}))}))},t.prototype.listFilesAndDirectories=function(e){var t,r=this;void 0===e&&(e={});var n=this.listFilesAndDirectoriesItems(e);return(t={next:function(){return q(this,void 0,void 0,(function(){return D(this,(function(e){return[2,n.next()]}))}))}})[Symbol.asyncIterator]=function(){return this},t.byPage=function(t){return void 0===t&&(t={}),r.iterateFilesAndDirectoriesSegments(t.continuationToken,M({maxResults:t.maxPageSize},e))},t},t.prototype.listFilesAndDirectoriesSegment=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareDirectoryClient-listFilesAndDirectoriesSegment",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.context.listFilesAndDirectoriesSegment(M(M({marker:e},t),{spanOptions:i}))]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.iterateHandleSegments=function(e,t){return void 0===t&&(t={}),L(this,arguments,(function(){var r;return D(this,(function(n){switch(n.label){case 0:if(!e&&void 0!==e)return[3,7];n.label=1;case 1:return[4,H(this.listHandlesSegment(e,t))];case 2:return r=n.sent(),e=r.continuationToken,[4,H(r)];case 3:return[4,H.apply(void 0,[n.sent()])];case 4:return[4,n.sent()];case 5:n.sent(),n.label=6;case 6:if(e)return[3,1];n.label=7;case 7:return[2]}}))}))},t.prototype.listHandleItems=function(e){return void 0===e&&(e={}),L(this,arguments,(function(){var t,r,n,i,a,s,o,l;return D(this,(function(u){switch(u.label){case 0:u.trys.push([0,9,10,15]),t=F(this.iterateHandleSegments(void 0,e)),u.label=1;case 1:return[4,H(t.next())];case 2:if((r=u.sent()).done)return[3,8];if(!(n=r.value).handleList)return[3,7];i=0,a=n.handleList,u.label=3;case 3:return i<a.length?[4,H(a[i])]:[3,7];case 4:return[4,u.sent()];case 5:u.sent(),u.label=6;case 6:return i++,[3,3];case 7:return[3,1];case 8:return[3,15];case 9:return s=u.sent(),o={error:s},[3,15];case 10:return u.trys.push([10,,13,14]),r&&!r.done&&(l=t.return)?[4,H(l.call(t))]:[3,12];case 11:u.sent(),u.label=12;case 12:return[3,14];case 13:if(o)throw o.error;return[7];case 14:return[7];case 15:return[2]}}))}))},t.prototype.listHandles=function(e){var t,r=this;void 0===e&&(e={});var n=this.listHandleItems(e);return(t={next:function(){return q(this,void 0,void 0,(function(){return D(this,(function(e){return[2,n.next()]}))}))}})[Symbol.asyncIterator]=function(){return this},t.byPage=function(t){return void 0===t&&(t={}),r.iterateHandleSegments(t.continuationToken,M({maxResults:t.maxPageSize},e))},t},t.prototype.listHandlesSegment=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a,s;return D(this,(function(o){switch(o.label){case 0:r=Oa("ShareDirectoryClient-listHandlesSegment",t.tracingOptions),n=r.span,i=r.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),e=""===e?void 0:e,[4,this.context.listHandles(M(M({marker:e},t),{spanOptions:i}))];case 2:return""===(a=o.sent()).handleList&&(a.handleList=void 0),[2,a];case 3:throw s=o.sent(),n.setStatus({code:Tt.UNKNOWN,message:s.message}),s;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.forceCloseHandlesSegment=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareDirectoryClient-forceCloseHandlesSegment",t.tracingOptions),n=r.span,i=r.spanOptions;try{return e=""===e?void 0:e,[2,this.context.forceCloseHandles("*",M(M({marker:e},t),{spanOptions:i}))]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.forceCloseAllHandles=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n,i,a,s,o;return D(this,(function(l){switch(l.label){case 0:t=Oa("ShareDirectoryClient-forceCloseAllHandles",e.tracingOptions),r=t.span,n=t.spanOptions,l.label=1;case 1:l.trys.push([1,6,7,8]),i=0,a="",l.label=2;case 2:return[4,this.forceCloseHandlesSegment(a,M(M({},e),{tracingOptions:M(M({},e.tracingOptions),{spanOptions:n})}))];case 3:s=l.sent(),a=s.marker,s.numberOfHandlesClosed&&(i+=s.numberOfHandlesClosed),l.label=4;case 4:if(a)return[3,2];l.label=5;case 5:return[2,i];case 6:throw o=l.sent(),r.setStatus({code:Tt.UNKNOWN,message:o.message}),o;case 7:return r.end(),[7];case 8:return[2]}}))}))},t.prototype.forceCloseHandle=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareDirectoryClient-forceCloseHandle",t.tracingOptions),n=r.span,i=r.spanOptions;try{if("*"===e)throw new RangeError("Parameter handleID should be a specified handle ID. Use forceCloseHandlesSegment() to close all handles.");return[2,this.context.forceCloseHandles(e,{abortSignal:t.abortSignal,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t}(ji),Ca=function(e){function t(t,r,n){var i,a,s=this;if(r instanceof Hi)a=t,i=r;else if(r instanceof ta)a=t,i=Li(r,n);else if(r||"string"==typeof r){if(!r||"string"!=typeof r)throw new Error("Expecting non-empty strings for shareName parameter");var o=bi(t),l=r;if("AccountConnString"===o.kind)throw new Error("Account connection string is only supported in Node.js environment");if("SASConnString"!==o.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");a=Pi(o.url,l)+"?"+o.accountSas,i=Li(new wa,n)}else a=t,i=Li(new wa,n);return(s=e.call(this,a,i)||this)._shareName=Ri(s.url).shareName,s.context=new zn(s.storageClientContext),s}return T(t,e),Object.defineProperty(t.prototype,"shareName",{get:function(){return this._shareName},enumerable:!0,configurable:!0}),t.prototype.withSnapshot=function(e){return new t(xi(this.url,hi.SHARE_SNAPSHOT,0===e.length?void 0:e),this.pipeline)},t.prototype.create=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareClient-create",e.tracingOptions),r=t.span,n=t.spanOptions;try{return[2,this.context.create(M(M({},e),{spanOptions:n}))]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.getDirectoryClient=function(e){return new Ra(Pi(this.url,encodeURIComponent(e)),this.pipeline)},Object.defineProperty(t.prototype,"rootDirectoryClient",{get:function(){return this.getDirectoryClient("")},enumerable:!0,configurable:!0}),t.prototype.createDirectory=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a,s,o;return D(this,(function(l){switch(l.label){case 0:r=Oa("ShareClient-createDirectory",t.tracingOptions),n=r.span,i=r.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,(a=this.getDirectoryClient(e)).create(M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))];case 2:return s=l.sent(),[2,{directoryClient:a,directoryCreateResponse:s}];case 3:throw o=l.sent(),n.setStatus({code:Tt.UNKNOWN,message:o.message}),o;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.deleteDirectory=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a;return D(this,(function(s){switch(s.label){case 0:r=Oa("ShareClient-deleteDirectory",t.tracingOptions),n=r.span,i=r.spanOptions,s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.getDirectoryClient(e).delete(M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))];case 2:return[2,s.sent()];case 3:throw a=s.sent(),n.setStatus({code:Tt.UNKNOWN,message:a.message}),a;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.createFile=function(e,t,r){return void 0===r&&(r={}),q(this,void 0,void 0,(function(){var n,i,a,s,o,l,u;return D(this,(function(p){switch(p.label){case 0:n=Oa("ShareClient-createFile",r.tracingOptions),i=n.span,a=n.spanOptions,p.label=1;case 1:return p.trys.push([1,3,4,5]),s=this.rootDirectoryClient,[4,(o=s.getFileClient(e)).create(t,M(M({},r),{tracingOptions:M(M({},r.tracingOptions),{spanOptions:a})}))];case 2:return l=p.sent(),[2,{fileClient:o,fileCreateResponse:l}];case 3:throw u=p.sent(),i.setStatus({code:Tt.UNKNOWN,message:u.message}),u;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.deleteFile=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a,s;return D(this,(function(o){switch(o.label){case 0:r=Oa("ShareClient-deleteFile",t.tracingOptions),n=r.span,i=r.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),a=this.rootDirectoryClient,[4,a.getFileClient(e).delete(M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))];case 2:return[2,o.sent()];case 3:throw s=o.sent(),n.setStatus({code:Tt.UNKNOWN,message:s.message}),s;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.getProperties=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareClient-getProperties",e.tracingOptions),r=t.span,n=t.spanOptions;try{return[2,this.context.getProperties({abortSignal:e.abortSignal,spanOptions:n})]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareClient-delete",e.tracingOptions),r=t.span,n=t.spanOptions;try{return[2,this.context.deleteMethod(M(M({},e),{spanOptions:n}))]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.setMetadata=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareClient-setMetadata",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.context.setMetadata({abortSignal:t.abortSignal,metadata:e,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.getAccessPolicy=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n,i,a,s,o,l,u;return D(this,(function(p){switch(p.label){case 0:t=Oa("ShareClient-getAccessPolicy",e.tracingOptions),r=t.span,n=t.spanOptions,p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this.context.getAccessPolicy({abortSignal:e.abortSignal,spanOptions:n})];case 2:for(i=p.sent(),a={_response:i._response,date:i.date,etag:i.etag,lastModified:i.lastModified,requestId:i.requestId,signedIdentifiers:[],version:i.version},s=0,o=i;s<o.length;s++)l=o[s],a.signedIdentifiers.push({accessPolicy:{expiry:new Date(l.accessPolicy.expiry),permissions:l.accessPolicy.permissions,start:new Date(l.accessPolicy.start)},id:l.id});return[2,a];case 3:throw u=p.sent(),r.setStatus({code:Tt.UNKNOWN,message:u.message}),u;case 4:return r.end(),[7];case 5:return[2]}}))}))},t.prototype.setAccessPolicy=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a,s,o,l;return D(this,(function(u){r=Oa("ShareClient-setAccessPolicy",t.tracingOptions),n=r.span,i=r.spanOptions;try{for(a=[],s=0,o=e||[];s<o.length;s++)l=o[s],a.push({accessPolicy:{expiry:wi(l.accessPolicy.expiry),permissions:l.accessPolicy.permissions,start:wi(l.accessPolicy.start)},id:l.id});return[2,this.context.setAccessPolicy({abortSignal:t.abortSignal,shareAcl:a,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.createSnapshot=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareClient-createSnapshot",e.tracingOptions),r=t.span,n=t.spanOptions;try{return[2,this.context.createSnapshot(M(M({abortSignal:e.abortSignal},e),{spanOptions:n}))]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.setQuota=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareClient-setQuota",t.tracingOptions),n=r.span,i=r.spanOptions;try{if(e<=0||e>5120)throw new RangeError("Share quota must be greater than 0, and less than or equal to 5Tib (5120GB)");return[2,this.context.setQuota({abortSignal:t.abortSignal,quota:e,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.getStatistics=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n,i,a;return D(this,(function(s){switch(s.label){case 0:t=Oa("ShareClient-getStatistics",e.tracingOptions),r=t.span,n=t.spanOptions,s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.context.getStatistics({abortSignal:e.abortSignal,spanOptions:n})];case 2:return i=s.sent(),1073741824,[2,M(M({},i),{shareUsage:Math.ceil(i.shareUsageBytes/1073741824)})];case 3:throw a=s.sent(),r.setStatus({code:Tt.UNKNOWN,message:a.message}),a;case 4:return r.end(),[7];case 5:return[2]}}))}))},t.prototype.createPermission=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareClient-createPermission",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.context.createPermission({permission:e},{abortSignal:t.abortSignal,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.getPermission=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareClient-getPermission",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.context.getPermission(e,{aborterSignal:t.abortSignal,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t}(ji),Ea=function(e){function t(t,r,n){var i,a=this;return i=r instanceof Hi?r:Li(r instanceof ta?r:new wa,n),(a=e.call(this,t,i)||this).serviceContext=new Sn(a.storageClientContext),a}return T(t,e),t.fromConnectionString=function(e,r){var n=bi(e);if("AccountConnString"===n.kind)throw new Error("Account connection string is only supported in Node.js environment");if("SASConnString"===n.kind){var i=Li(new wa,r);return new t(n.url+"?"+n.accountSas,i)}throw new Error("Connection string must be either an Account connection string or a SAS connection string")},t.prototype.getShareClient=function(e){return new Ca(Pi(this.url,e),this.pipeline)},t.prototype.createShare=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a,s;return D(this,(function(o){switch(o.label){case 0:r=Oa("ShareServiceClient-createShare",t.tracingOptions),n=r.span,i=r.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,(a=this.getShareClient(e)).create(M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))];case 2:return[2,{shareCreateResponse:o.sent(),shareClient:a}];case 3:throw s=o.sent(),n.setStatus({code:Tt.UNKNOWN,message:s.message}),s;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.deleteShare=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i,a;return D(this,(function(s){switch(s.label){case 0:r=Oa("ShareServiceClient-deleteShare",t.tracingOptions),n=r.span,i=r.spanOptions,s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.getShareClient(e).delete(M(M({},t),{tracingOptions:M(M({},t.tracingOptions),{spanOptions:i})}))];case 2:return[2,s.sent()];case 3:throw a=s.sent(),n.setStatus({code:Tt.UNKNOWN,message:a.message}),a;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.getProperties=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t,r,n;return D(this,(function(i){t=Oa("ShareServiceClient-getProperties",e.tracingOptions),r=t.span,n=t.spanOptions;try{return[2,this.serviceContext.getProperties({abortSignal:e.abortSignal,spanOptions:n})]}catch(e){throw r.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{r.end()}return[2]}))}))},t.prototype.setProperties=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareServiceClient-setProperties",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.serviceContext.setProperties(e,{abortSignal:t.abortSignal,spanOptions:i})]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t.prototype.listSegments=function(e,t){return void 0===t&&(t={}),L(this,arguments,(function(){var r;return D(this,(function(n){switch(n.label){case 0:return[4,H(this.listSharesSegment(e,t))];case 1:return r=n.sent(),e=r.continuationToken,[4,H(r)];case 2:return[4,H.apply(void 0,[n.sent()])];case 3:return[4,n.sent()];case 4:n.sent(),n.label=5;case 5:if(e)return[3,0];n.label=6;case 6:return[2]}}))}))},t.prototype.listItems=function(e){return void 0===e&&(e={}),L(this,arguments,(function(){var t,r,n,i,a;return D(this,(function(s){switch(s.label){case 0:s.trys.push([0,7,8,13]),t=F(this.listSegments(void 0,e)),s.label=1;case 1:return[4,H(t.next())];case 2:return(r=s.sent()).done?[3,6]:[5,I(U(F(r.value.shareItems)))];case 3:return[4,H.apply(void 0,[s.sent()])];case 4:s.sent(),s.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return n=s.sent(),i={error:n},[3,13];case 8:return s.trys.push([8,,11,12]),r&&!r.done&&(a=t.return)?[4,H(a.call(t))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,12];case 11:if(i)throw i.error;return[7];case 12:return[7];case 13:return[2]}}))}))},t.prototype.listShares=function(e){var t,r=this;void 0===e&&(e={});var n=[];e.includeMetadata&&n.push("metadata"),e.includeSnapshots&&n.push("snapshots");var i=M(M({},e),n.length>0?{include:n}:{}),a=this.listItems(i);return(t={next:function(){return a.next()}})[Symbol.asyncIterator]=function(){return this},t.byPage=function(e){return void 0===e&&(e={}),r.listSegments(e.continuationToken,M({maxResults:e.maxPageSize},i))},t},t.prototype.listSharesSegment=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var r,n,i;return D(this,(function(a){r=Oa("ShareServiceClient-listSharesSegment",t.tracingOptions),n=r.span,i=r.spanOptions;try{return[2,this.serviceContext.listSharesSegment(M(M({marker:e},t),{spanOptions:i}))]}catch(e){throw n.setStatus({code:Tt.UNKNOWN,message:e.message}),e}finally{n.end()}return[2]}))}))},t}(ji);e.AnonymousCredential=wa,e.AnonymousCredentialPolicy=xa,e.BaseRequestPolicy=le,e.Credential=ta,e.CredentialPolicy=Pa,e.FileSystemAttributes=Wi,e.HttpHeaders=r,e.Pipeline=Hi,e.RequestPolicyOptions=ue,e.RestError=X,e.ShareClient=Ca,e.ShareDirectoryClient=Ra,e.ShareFileClient=za,e.ShareServiceClient=Ea,e.StorageBrowserPolicy=Ei,e.StorageBrowserPolicyFactory=Ti,e.StorageRetryPolicy=Di,e.StorageRetryPolicyFactory=Ii,e.WebResource=C,e.deserializationPolicy=Qe,e.logger=di,e.newPipeline=Li,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=azure-storage-file-share.min.js.map
